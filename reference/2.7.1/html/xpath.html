<!DOCTYPE HTML>
<html lang="en" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Xpath | Citrus Reference Guide</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.6.7">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="gitbook/style.css">
    
        
        <link rel="stylesheet" href="gitbook/plugins/gitbook-plugin-anchors/plugin.css">
        
    
        
        <link rel="stylesheet" href="gitbook/plugins/gitbook-plugin-code_tomorrow_scheme/code-tomorrow-scheme.css">
        
    
        
        <link rel="stylesheet" href="gitbook/plugins/gitbook-plugin-highlight/website.css">
        
    
        
        <link rel="stylesheet" href="gitbook/plugins/gitbook-plugin-search/search.css">
        
    
        
        <link rel="stylesheet" href="gitbook/plugins/gitbook-plugin-fontsettings/website.css">
        
    
    
        <link rel="stylesheet" href="./styles/website.css">
    

        
    
    
    <link rel="next" href="./json-path.html" />
    
    
    <link rel="prev" href="./validation-gzip.html" />
    

        
    </head>
    <body>
        
        
    <div class="book"
        data-level="11"
        data-chapter-title="Xpath"
        data-filepath="xpath.md"
        data-basepath="."
        data-revision="Wed Mar 15 2017 10:41:42 GMT+0100 (CET)"
        data-innerlanguage="">
    

<div class="book-summary">
    <nav role="navigation">
        <ul class="summary">
            
            
            
            

            

            
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="./index.html">
                
                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="preface.html">
            
                
                    <a href="./preface.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        Preface
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2" data-path="changes-new.html">
            
                
                    <a href="./changes-new.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        Changes new
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3" data-path="introduction.html">
            
                
                    <a href="./introduction.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        Introduction
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4" data-path="setup.html">
            
                
                    <a href="./setup.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                        Setup
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5" data-path="test-case.html">
            
                
                    <a href="./test-case.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                        Test case
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6" data-path="test-variables.html">
            
                
                    <a href="./test-variables.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.</b>
                        
                        Test variables
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7" data-path="run.html">
            
                
                    <a href="./run.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.</b>
                        
                        Run
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8" data-path="configuration.html">
            
                
                    <a href="./configuration.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.</b>
                        
                        Configuration
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9" data-path="endpoints.html">
            
                
                    <a href="./endpoints.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.</b>
                        
                        Endpoints
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="10" data-path="validation.html">
            
                
                    <a href="./validation.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>10.</b>
                        
                        Validation
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="10.1" data-path="validation-xml.html">
            
                
                    <a href="./validation-xml.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>10.1.</b>
                        
                        Xml
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="10.2" data-path="validation-schema.html">
            
                
                    <a href="./validation-schema.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>10.2.</b>
                        
                        Schema
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="10.3" data-path="validation-json.html">
            
                
                    <a href="./validation-json.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>10.3.</b>
                        
                        Json
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="10.4" data-path="validation-xhtml.html">
            
                
                    <a href="./validation-xhtml.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>10.4.</b>
                        
                        Xhtml
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="10.5" data-path="validation-plaintext.html">
            
                
                    <a href="./validation-plaintext.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>10.5.</b>
                        
                        Plaintext
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="10.6" data-path="validation-binary.html">
            
                
                    <a href="./validation-binary.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>10.6.</b>
                        
                        Binary
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="10.7" data-path="validation-gzip.html">
            
                
                    <a href="./validation-gzip.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>10.7.</b>
                        
                        Gzip
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter active" data-level="11" data-path="xpath.html">
            
                
                    <a href="./xpath.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>11.</b>
                        
                        Xpath
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="12" data-path="json-path.html">
            
                
                    <a href="./json-path.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>12.</b>
                        
                        JsonPath
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="13" data-path="actions.html">
            
                
                    <a href="./actions.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>13.</b>
                        
                        Actions
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="13.1" data-path="actions-send.html">
            
                
                    <a href="./actions-send.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>13.1.</b>
                        
                        Send
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="13.2" data-path="actions-receive.html">
            
                
                    <a href="./actions-receive.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>13.2.</b>
                        
                        Receive
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="13.3" data-path="actions-database.html">
            
                
                    <a href="./actions-database.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>13.3.</b>
                        
                        Database
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="13.4" data-path="actions-sleep.html">
            
                
                    <a href="./actions-sleep.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>13.4.</b>
                        
                        Sleep
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="13.5" data-path="actions-java.html">
            
                
                    <a href="./actions-java.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>13.5.</b>
                        
                        Java
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="13.6" data-path="actions-timeout.html">
            
                
                    <a href="./actions-timeout.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>13.6.</b>
                        
                        Timeout
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="13.7" data-path="actions-echo.html">
            
                
                    <a href="./actions-echo.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>13.7.</b>
                        
                        Echo
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="13.8" data-path="actions-stop-time.html">
            
                
                    <a href="./actions-stop-time.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>13.8.</b>
                        
                        Stop time
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="13.9" data-path="actions-create-variables.html">
            
                
                    <a href="./actions-create-variables.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>13.9.</b>
                        
                        Create variables
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="13.10" data-path="actions-trace.html">
            
                
                    <a href="./actions-trace.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>13.10.</b>
                        
                        Trace
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="13.11" data-path="actions-transform.html">
            
                
                    <a href="./actions-transform.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>13.11.</b>
                        
                        Transform
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="13.12" data-path="actions-groovy.html">
            
                
                    <a href="./actions-groovy.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>13.12.</b>
                        
                        Groovy
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="13.13" data-path="actions-fail.html">
            
                
                    <a href="./actions-fail.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>13.13.</b>
                        
                        Fail
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="13.14" data-path="actions-input.html">
            
                
                    <a href="./actions-input.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>13.14.</b>
                        
                        Input
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="13.15" data-path="actions-load.html">
            
                
                    <a href="./actions-load.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>13.15.</b>
                        
                        Load
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="13.16" data-path="actions-wait.html">
            
                
                    <a href="./actions-wait.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>13.16.</b>
                        
                        Wait
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="13.17" data-path="actions-purge-jms.html">
            
                
                    <a href="./actions-purge-jms.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>13.17.</b>
                        
                        Purge JMS queues
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="13.18" data-path="actions-purge-channels.html">
            
                
                    <a href="./actions-purge-channels.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>13.18.</b>
                        
                        Purge channels
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="13.19" data-path="actions-purge-endpoints.html">
            
                
                    <a href="./actions-purge-endpoints.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>13.19.</b>
                        
                        Purge endpoints
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="13.20" data-path="actions-assert.html">
            
                
                    <a href="./actions-assert.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>13.20.</b>
                        
                        Assert
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="13.21" data-path="actions-catch.html">
            
                
                    <a href="./actions-catch.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>13.21.</b>
                        
                        Catch
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="13.22" data-path="actions-antrun.html">
            
                
                    <a href="./actions-antrun.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>13.22.</b>
                        
                        Antrun
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="13.23" data-path="actions-manage-server.html">
            
                
                    <a href="./actions-manage-server.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>13.23.</b>
                        
                        Manage server
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="13.24" data-path="actions-stop-timer.html">
            
                
                    <a href="./actions-stop-timer.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>13.24.</b>
                        
                        Stop timer
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="13.25" data-path="actions-generic-action.html">
            
                
                    <a href="./actions-generic-action.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>13.25.</b>
                        
                        Generic action
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="14" data-path="templates.html">
            
                
                    <a href="./templates.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>14.</b>
                        
                        Templates
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="15" data-path="behaviors.html">
            
                
                    <a href="./behaviors.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>15.</b>
                        
                        Test behaviors
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="16" data-path="containers.html">
            
                
                    <a href="./containers.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>16.</b>
                        
                        Containers
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="16.1" data-path="containers-sequential.html">
            
                
                    <a href="./containers-sequential.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>16.1.</b>
                        
                        Sequential
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="16.2" data-path="containers-conditional.html">
            
                
                    <a href="./containers-conditional.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>16.2.</b>
                        
                        Conditional
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="16.3" data-path="containers-parallel.html">
            
                
                    <a href="./containers-parallel.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>16.3.</b>
                        
                        Parallel
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="16.4" data-path="containers-iterate.html">
            
                
                    <a href="./containers-iterate.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>16.4.</b>
                        
                        Iterate
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="16.5" data-path="containers-repeat.html">
            
                
                    <a href="./containers-repeat.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>16.5.</b>
                        
                        Repeat
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="16.6" data-path="containers-repeat-onerror.html">
            
                
                    <a href="./containers-repeat-onerror.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>16.6.</b>
                        
                        Repeat On Error
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="16.7" data-path="containers-timer.html">
            
                
                    <a href="./containers-timer.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>16.7.</b>
                        
                        Timer
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="16.8" data-path="containers-custom.html">
            
                
                    <a href="./containers-custom.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>16.8.</b>
                        
                        Custom
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="17" data-path="finally-section.html">
            
                
                    <a href="./finally-section.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>17.</b>
                        
                        Finally
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="18" data-path="jms.html">
            
                
                    <a href="./jms.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>18.</b>
                        
                        Jms
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="19" data-path="http.html">
            
                
                    <a href="./http.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>19.</b>
                        
                        Http
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="20" data-path="http-websocket.html">
            
                
                    <a href="./http-websocket.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>20.</b>
                        
                        Http Websockets
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="21" data-path="soap.html">
            
                
                    <a href="./soap.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>21.</b>
                        
                        Soap
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="22" data-path="ftp.html">
            
                
                    <a href="./ftp.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>22.</b>
                        
                        Ftp
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="23" data-path="message-channel.html">
            
                
                    <a href="./message-channel.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>23.</b>
                        
                        Message channel
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="24" data-path="file.html">
            
                
                    <a href="./file.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>24.</b>
                        
                        File
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="25" data-path="camel.html">
            
                
                    <a href="./camel.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>25.</b>
                        
                        Camel
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="26" data-path="vertx.html">
            
                
                    <a href="./vertx.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>26.</b>
                        
                        Vertx
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="27" data-path="mail.html">
            
                
                    <a href="./mail.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>27.</b>
                        
                        Mail
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="28" data-path="arquillian.html">
            
                
                    <a href="./arquillian.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>28.</b>
                        
                        Arquillian
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="29" data-path="docker.html">
            
                
                    <a href="./docker.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>29.</b>
                        
                        Docker
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="30" data-path="kubernetes.html">
            
                
                    <a href="./kubernetes.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>30.</b>
                        
                        Kubernetes
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="31" data-path="ssh.html">
            
                
                    <a href="./ssh.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>31.</b>
                        
                        Ssh
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="32" data-path="rmi.html">
            
                
                    <a href="./rmi.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>32.</b>
                        
                        Rmi
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="33" data-path="jmx.html">
            
                
                    <a href="./jmx.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>33.</b>
                        
                        Jmx
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="34" data-path="cucumber.html">
            
                
                    <a href="./cucumber.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>34.</b>
                        
                        Cucumber
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="35" data-path="zookeeper.html">
            
                
                    <a href="./zookeeper.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>35.</b>
                        
                        Zookeeper
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="36" data-path="restdocs.html">
            
                
                    <a href="./restdocs.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>36.</b>
                        
                        Restdocs
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="37" data-path="selenium.html">
            
                
                    <a href="./selenium.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>37.</b>
                        
                        Selenium
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="38" data-path="endpoint-component.html">
            
                
                    <a href="./endpoint-component.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>38.</b>
                        
                        Endpoint component
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="39" data-path="endpoint-adapter.html">
            
                
                    <a href="./endpoint-adapter.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>39.</b>
                        
                        Endpoint adapter
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="40" data-path="functions.html">
            
                
                    <a href="./functions.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>40.</b>
                        
                        Functions
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="41" data-path="validation-matchers.html">
            
                
                    <a href="./validation-matchers.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>41.</b>
                        
                        Validation Matchers
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="42" data-path="data-dictionary.html">
            
                
                    <a href="./data-dictionary.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>42.</b>
                        
                        Data dictionary
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="43" data-path="test-actors.html">
            
                
                    <a href="./test-actors.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>43.</b>
                        
                        Test actors
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="44" data-path="test-suite.html">
            
                
                    <a href="./test-suite.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>44.</b>
                        
                        Test suite
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="45" data-path="meta-info.html">
            
                
                    <a href="./meta-info.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>45.</b>
                        
                        Meta info
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="46" data-path="message-tracing.html">
            
                
                    <a href="./message-tracing.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>46.</b>
                        
                        Message tracing
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="47" data-path="reporting.html">
            
                
                    <a href="./reporting.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>47.</b>
                        
                        Reporting
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="48" data-path="samples.html">
            
                
                    <a href="./samples.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>48.</b>
                        
                        Samples
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="48.1" data-path="samples-flightbooking.html">
            
                
                    <a href="./samples-flightbooking.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>48.1.</b>
                        
                        Flight Booking Sample
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="49" data-path="appendix.html">
            
                
                    <a href="./appendix.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>49.</b>
                        
                        Appendix
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="49.1" data-path="changes-2-6.html">
            
                
                    <a href="./changes-2-6.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>49.1.</b>
                        
                        Changes 2.6
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="49.2" data-path="changes-2-5.html">
            
                
                    <a href="./changes-2-5.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>49.2.</b>
                        
                        Changes 2.5
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="49.3" data-path="changes-2-4.html">
            
                
                    <a href="./changes-2-4.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>49.3.</b>
                        
                        Changes 2.4
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="49.4" data-path="changes-2-3.html">
            
                
                    <a href="./changes-2-3.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>49.4.</b>
                        
                        Changes 2.3
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="49.5" data-path="changes-2-2.html">
            
                
                    <a href="./changes-2-2.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>49.5.</b>
                        
                        Changes 2.2
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="49.6" data-path="changes-2-1.html">
            
                
                    <a href="./changes-2-1.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>49.6.</b>
                        
                        Changes 2.1
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="49.7" data-path="changes-2-0.html">
            
                
                    <a href="./changes-2-0.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>49.7.</b>
                        
                        Changes 2.0
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="49.8" data-path="changes-1-4.html">
            
                
                    <a href="./changes-1-4.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>49.8.</b>
                        
                        Changes 1.4
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="49.9" data-path="changes-1-3.html">
            
                
                    <a href="./changes-1-3.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>49.9.</b>
                        
                        Changes 1.3
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="49.10" data-path="changes-1-2.html">
            
                
                    <a href="./changes-1-2.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>49.10.</b>
                        
                        Changes 1.2
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    


            
            <li class="divider"></li>
            <li>
                <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                    Published with GitBook
                </a>
            </li>
            
        </ul>
    </nav>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header" role="navigation">
    <!-- Actions Left -->
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="./" >Citrus Reference Guide</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1" role="main">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h2 id="using-xpath"><a name="using-xpath" class="plugin-anchor" href="#using-xpath"><span class="fa fa-link"></span></a>Using XPath</h2>
<p>Some time ago in this document we have already seen how XML message payloads are constructed when sending and receiving messages. Now using XPath is a very powerful way of accessing elements in complex XML structures. The XPath expression language is very handy when it comes to save element values as test variables or when validating special elements in a XML message structure.</p>
<p>XPath is a very powerful technology for walking XML trees. This W3C standard stands for advanced XML tree handling using a special syntax as query language. Citrus supports the XPath syntax in the following fields:</p>
<ul>
<li>&lt;message&gt;&lt;element path=&quot;[XPath-Expression]&quot;&gt;&lt;/message&gt;</li>
<li>&lt;validate&gt;&lt;xpath expression=&quot;[XPath-Expression]&quot;/&gt;&lt;/validate&gt;</li>
<li>&lt;extract&gt;&lt;message path=&quot;[XPath-Expression]&quot;&gt;&lt;/extract&gt;</li>
<li>&lt;ignore path=&quot;[XPath-Expression]&quot;/&gt;</li>
</ul>
<p>The next program listing indicates the power in using XPath with Citrus:</p>
<pre><code class="lang-xml"><span class="hljs-tag">&lt;<span class="hljs-title">message</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">validate</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">xpath</span> <span class="hljs-attribute">expression</span>=<span class="hljs-value">&quot;//User/Name&quot;</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">&quot;John&quot;</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">xpath</span> <span class="hljs-attribute">expression</span>=<span class="hljs-value">&quot;//User/Address[@type=&apos;office&apos;]/Street&quot;</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">&quot;Companystreet 21&quot;</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">xpath</span> <span class="hljs-attribute">expression</span>=<span class="hljs-value">&quot;//User/Name&quot;</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">&quot;${userName}&quot;</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">xpath</span> <span class="hljs-attribute">expression</span>=<span class="hljs-value">&quot;//User/@isAdmin&quot;</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">&quot;${isAdmin}&quot;</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">xpath</span> <span class="hljs-attribute">expression</span>=<span class="hljs-value">&quot;//User/@isAdmin&quot;</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">&quot;true&quot;</span> <span class="hljs-attribute">result-type</span>=<span class="hljs-value">&quot;boolean&quot;</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">xpath</span> <span class="hljs-attribute">expression</span>=<span class="hljs-value">&quot;//*[.=&apos;search-for&apos;]&quot;</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">&quot;searched-for&quot;</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">xpath</span> <span class="hljs-attribute">expression</span>=<span class="hljs-value">&quot;count(//orderStatus[.=&apos;success&apos;])&quot;</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">&quot;3&quot;</span> <span class="hljs-attribute">result-type</span>=<span class="hljs-value">&quot;number&quot;</span>/&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">validate</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">message</span>&gt;</span>
</code></pre>
<p>Now we describe the XPath usage in Citrus step by step.</p>
<h3 id="manipulate-with-xpath"><a name="manipulate-with-xpath" class="plugin-anchor" href="#manipulate-with-xpath"><span class="fa fa-link"></span></a>Manipulate with XPath</h3>
<p>Some elements in XML message payloads might be of dynamic nature. Just think of generated identifiers or timestamps. Also we do not want to repeat the same static identifier several times in our test cases. This is the time where test variables and dynamic message element overwrite come in handy. The idea is simple. We want to overwrite a specific message element in our payload with a dynamic value. This can be done with XPath or inline variable declarations. Lets have a look at an example listing showing both ways:</p>
<p><strong>XML DSL</strong> </p>
<pre><code class="lang-xml"><span class="hljs-tag">&lt;<span class="hljs-title">message</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">payload</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">TestMessage</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">MessageId</span>&gt;</span>${messageId}<span class="hljs-tag">&lt;/<span class="hljs-title">MessageId</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">CreatedBy</span>&gt;</span>_<span class="hljs-tag">&lt;/<span class="hljs-title">CreatedBy</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">VersionId</span>&gt;</span>${version}<span class="hljs-tag">&lt;/<span class="hljs-title">VersionId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">TestMessage</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">payload</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">element</span> <span class="hljs-attribute">path</span>=<span class="hljs-value">&quot;/TestMessage/CreatedBy&quot;</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">&quot;${user}&quot;</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">message</span>&gt;</span>
</code></pre>
<p>The program listing above shows ways of setting variable values inside a message template. First of all you can simply place variable expressions inside the message (see how ${messageId} is used). In addition to that you can also use XPath expressions to explicitly overwrite message elements before validation.</p>
<p><strong><em><code>&lt;element path=&quot;/TestMessage/CreatedBy&quot; value=&quot;${user}&quot;/&gt;</code></em></strong> </p>
<p>The XPath expression evaluates and searches for the right element in the message payload. The previously defined variable <strong>${user}</strong> replaces the element value. Of course this works with XML attributes too.</p>
<p>Both ways via XPath or inline variable expressions are equal to each other. With respect to the complexity of XML namespaces and XPath you may find the inline variable expression more comfortable to use. Anyway feel free to choose the way that fits best for you. This is how we can add dynamic variable values to the control template in order to increase maintainability and robustness of message validation.</p>
<p><strong>Tip</strong>
Validation matchers put validation mechanisms to a new level offering dynamic assertion statements for validation. Have a look at the possibilities with assertion statements in <a href="validation-matchers">validation-matchers</a>### Validate with XPath</p>
<p>We have already seen how to validate whole XML structures with control message templates. All elements are validated and compared one after another. In some cases this approach might be too extensive. Imagine the tester only needs to validate a small subset of message elements. The definition of control templates in combination with several ignore statements is not appropriate in this case. You would rather want to use explicit element validation.</p>
<p><strong>XML DSL</strong> </p>
<pre><code class="lang-xml"><span class="hljs-tag">&lt;<span class="hljs-title">message</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">validate</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">xpath</span> <span class="hljs-attribute">expression</span>=<span class="hljs-value">&quot;/TestRequest/MessageId&quot;</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">&quot;${messageId}&quot;</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">xpath</span> <span class="hljs-attribute">expression</span>=<span class="hljs-value">&quot;/TestRequest/VersionId&quot;</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">&quot;2&quot;</span>/&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">validate</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">message</span>&gt;</span>
</code></pre>
<p><strong>Java DSL designer</strong> </p>
<pre><code class="lang-java"><span class="hljs-annotation">@CitrusTest</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">receiveMessageTest</span><span class="hljs-params">()</span> </span>{
    receive(<span class="hljs-string">&quot;helloServiceServer&quot;</span>)
        .validate(<span class="hljs-string">&quot;/TestRequest/MessageId&quot;</span>, <span class="hljs-string">&quot;${messageId}&quot;</span>)
        .validate(<span class="hljs-string">&quot;//VersionId&quot;</span>, <span class="hljs-string">&quot;2&quot;</span>)
        .header(<span class="hljs-string">&quot;Operation&quot;</span>, <span class="hljs-string">&quot;sayHello&quot;</span>);
}
</code></pre>
<p>Instead of comparing the whole message some message elements are validated explicitly via XPath. Citrus evaluates the XPath expression on the received message and compares the result value to the control value. The basic message structure as well as all other message elements are not included into this explicit validation.</p>
<p><strong>Note</strong>
If this type of element validation is chosen neither <payload> nor <data> nor <resource> template definitions are allowed in Citrus XML test cases.</resource></data></payload></p>
<p><strong>Tip</strong>
Citrus offers an alternative dot-notated syntax in order to walk through XML trees. In case you are not familiar with XPath or simply need a very easy way to find your element inside the XML tree you might use this way. Every element hierarchy in the XML tree is represented with a simple dot - for example:</p>
<p><strong><em>TestRequest.VersionId</em></strong> </p>
<p>The expression will search the XML tree for the respective <testrequest><versionid> element. Attributes are supported too. In case the last element in the dot-notated expression is a XML attribute the framework will automatically find it.</versionid></testrequest></p>
<p>Of course this dot-notated syntax is very simple and might not be applicable for more complex tree navigation. XPath is much more powerful - no doubt. However the dot-notated syntax might help those of you that are not familiar with XPath. So the dot-notation is supported wherever XPath expressions might apply.</p>
<p>The Xpath expressions can evaluate to different result types. By default Citrus is operating on <strong>NODE</strong> and <strong>STRING</strong> result types so that you can validate some element value. But you can also use different result types such as <strong>NODESET</strong> and <strong>BOOLEAN</strong> . See this example how that works:</p>
<p><strong>XML DSL</strong> </p>
<pre><code class="lang-xml"><span class="hljs-tag">&lt;<span class="hljs-title">message</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">validate</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">xpath</span> <span class="hljs-attribute">expression</span>=<span class="hljs-value">&quot;/TestRequest/Error&quot;</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">&quot;false&quot;</span> <span class="hljs-attribute">result-type</span>=<span class="hljs-value">&quot;boolean&quot;</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">xpath</span> <span class="hljs-attribute">expression</span>=<span class="hljs-value">&quot;/TestRequest/Status[.=&apos;success&apos;]&quot;</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">&quot;3&quot;</span> <span class="hljs-attribute">result-type</span>=<span class="hljs-value">&quot;number&quot;</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">xpath</span> <span class="hljs-attribute">expression</span>=<span class="hljs-value">&quot;/TestRequest/OrderType&quot;</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">&quot;[single, multi, multi]&quot;</span> <span class="hljs-attribute">result-type</span>=<span class="hljs-value">&quot;node-set&quot;</span>/&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">validate</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">message</span>&gt;</span>
</code></pre>
<p><strong>Java DSL designer</strong> </p>
<pre><code class="lang-java"><span class="hljs-annotation">@CitrusTest</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">receiveMessageTest</span><span class="hljs-params">()</span> </span>{
    receive(<span class="hljs-string">&quot;helloServiceServer&quot;</span>)
        .validate(<span class="hljs-string">&quot;boolean:/TestRequest/Error&quot;</span>, <span class="hljs-keyword">false</span>)
        .validate(<span class="hljs-string">&quot;number:/TestRequest/Status[.=&apos;success&apos;]&quot;</span>, <span class="hljs-number">3</span>)
        .validate(<span class="hljs-string">&quot;node-set:/TestRequest/OrderType&quot;</span>, <span class="hljs-string">&quot;[single, multi, multi]&quot;</span>)
        .header(<span class="hljs-string">&quot;Operation&quot;</span>, <span class="hljs-string">&quot;sayHello&quot;</span>);
}
</code></pre>
<p>In the example above we use different expression result types. First we want to make sure nor <strong>/TestRequest/Error</strong> element is present. This can be done with a boolean result type and <strong>false</strong> value. Second we want to validate the number of found elements for the expression <strong>/TestRequest/Status[.=&apos;success&apos;]</strong> . The XPath expression evaluates to a node list that results in its list size to be checked. And last not least we evaluate to a <strong>node-set</strong> result type where all values in the node list will be translated to a comma delimited string value.</p>
<p>Now lets have a look at some more powerful validation expressions using matcher implementations. Up to now we have seen that XPath expression results are comparable with <strong>equalTo</strong> operations. We would like to add some more powerful validation such as <strong>greaterThan</strong>, <strong>lessThan</strong>, <strong>hasSize</strong> and much more. Therefore we have introduced Hamcrest validation matcher support in Citrus. Hamcrest is a very poweful matcher library that provides a fantastic set of matcher implementations. Lets see how we can add these in our test case:</p>
<p><strong>XML DSL</strong> </p>
<pre><code class="lang-xml"><span class="hljs-tag">&lt;<span class="hljs-title">message</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">validate</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">xpath</span> <span class="hljs-attribute">expression</span>=<span class="hljs-value">&quot;/TestRequest/Error&quot;</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">&quot;@assertThat(anyOf(empty(), nullValue()))@&quot;</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">xpath</span> <span class="hljs-attribute">expression</span>=<span class="hljs-value">&quot;/TestRequest/Status[.=&apos;success&apos;]&quot;</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">&quot;@assertThat(greaterThan(0))@&quot;</span> <span class="hljs-attribute">result-type</span>=<span class="hljs-value">&quot;number&quot;</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">xpath</span> <span class="hljs-attribute">expression</span>=<span class="hljs-value">&quot;/TestRequest/OrderType&quot;</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">&quot;@assertThat(hasSize(3))@&quot;</span> <span class="hljs-attribute">result-type</span>=<span class="hljs-value">&quot;node-set&quot;</span>/&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">validate</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">message</span>&gt;</span>
</code></pre>
<p><strong>Java DSL designer</strong> </p>
<pre><code class="lang-java"><span class="hljs-annotation">@CitrusTest</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">receiveMessageTest</span><span class="hljs-params">()</span> </span>{
    receive(<span class="hljs-string">&quot;helloServiceServer&quot;</span>)
        .validate(<span class="hljs-string">&quot;/TestRequest/Error&quot;</span>, anyOf(empty(), nullValue()))
        .validate(<span class="hljs-string">&quot;number:/TestRequest/Status[.=&apos;success&apos;]&quot;</span>, greaterThan(<span class="hljs-number">0</span>))
        .validate(<span class="hljs-string">&quot;node-set:/TestRequest/OrderType&quot;</span>, hasSize(<span class="hljs-number">3</span>))
        .header(<span class="hljs-string">&quot;Operation&quot;</span>, <span class="hljs-string">&quot;sayHello&quot;</span>);
}
</code></pre>
<p>When using the XML DSL we have to use the <strong>assertThat</strong> validation matcher syntax for defining the Hamcrest matchers. You can combine matcher implementation as seen in the <strong>anyOf(empty(), nullValue())</strong> expression. When using the Java DSL you can just add the matcher as expected result object. Citrus evaluates the matchers and makes sure everything is as expected. This is a very powerful validation mechanism as it also works with node-sets containing multiple values as list.</p>
<p>This is how you can add very powerful message element validation in XML using XPath expressions.</p>
<h3 id="extract-variables-with-xpath"><a name="extract-variables-with-xpath" class="plugin-anchor" href="#extract-variables-with-xpath"><span class="fa fa-link"></span></a>Extract variables with XPath</h3>
<p>Imagine you receive a message in your test with some generated message identifier values. You have no chance to predict the identifier value because it was generated at runtime by a foreign application. You can ignore the value in order to protect your validation. But in many cases you might need to return this identifier in the respective response message or somewhat later on in the test. So we have to save the dynamic message content for reuse in later test steps. The solution is simple and very powerful. We can extract dynamic values from received messages and save those to test variables. Add this code to your message receiving action.</p>
<p><strong>XML DSL</strong> </p>
<pre><code class="lang-xml"><span class="hljs-tag">&lt;<span class="hljs-title">extract</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">header</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">&quot;Operation&quot;</span> <span class="hljs-attribute">variable</span>=<span class="hljs-value">&quot;operation&quot;</span>/&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">message</span> <span class="hljs-attribute">path</span>=<span class="hljs-value">&quot;/TestRequest/VersionId&quot;</span> <span class="hljs-attribute">variable</span>=<span class="hljs-value">&quot;versionId&quot;</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">extract</span>&gt;</span>
</code></pre>
<p><strong>Java DSL designer</strong> </p>
<pre><code class="lang-java"><span class="hljs-annotation">@CitrusTest</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">receiveMessageTest</span><span class="hljs-params">()</span> </span>{
    receive(<span class="hljs-string">&quot;helloServiceServer&quot;</span>)
        .extractFromHeader(<span class="hljs-string">&quot;Operation&quot;</span>, <span class="hljs-string">&quot;operation&quot;</span>)
        .extractFromPayload(<span class="hljs-string">&quot;//TestRequest/VersionId&quot;</span>, <span class="hljs-string">&quot;versionId&quot;</span>);

    echo(<span class="hljs-string">&quot;Extracted operation from header is: ${operation}&quot;</span>);
    echo(<span class="hljs-string">&quot;Extracted version from payload is: ${versionId}&quot;</span>);
}
</code></pre>
<p>As you can see Citrus is able to extract both header and message payload content into test variables. It does not matter if you use new test variables or existing variables as target. The extraction will automatically create a new variable in case it does not exist. The time the variable was created all following test actions can access the test variables as usual. So you can reference the variable values in response messages or other test steps ahead.</p>
<p><strong>Tip</strong>
We can also use expression result types in order to manipulate the test variable outcome. In case we use a <strong>boolean</strong> result type the existence of elements can be saved to variable values. The result type <strong>node-set</strong> translates a node list result to a comma separated string of all values in this node list. Simply use the expression result type attributes as shown in previous sections.</p>
<h3 id="xml-namespaces-in-xpath"><a name="xml-namespaces-in-xpath" class="plugin-anchor" href="#xml-namespaces-in-xpath"><span class="fa fa-link"></span></a>XML namespaces in XPath</h3>
<p>When it comes to XML namespaces you have to be careful with your XPath expressions. Lets have a look at an example message that uses XML namespaces:</p>
<pre><code class="lang-xml"><span class="hljs-tag">&lt;<span class="hljs-title">ns1:TestMessage</span> <span class="hljs-attribute">xmlns:ns1</span>=<span class="hljs-value">&quot;http://citrus.com/namespace&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">ns1:TestHeader</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">ns1:CorrelationId</span>&gt;</span>_<span class="hljs-tag">&lt;/<span class="hljs-title">ns1:CorrelationId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">ns1:Timestamp</span>&gt;</span>2001-12-17T09:30:47.0Z<span class="hljs-tag">&lt;/<span class="hljs-title">ns1:Timestamp</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">ns1:VersionId</span>&gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-title">ns1:VersionId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">ns1:TestHeader</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">ns1:TestBody</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">ns1:Customer</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">ns1:Id</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-title">ns1:Id</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">ns1:Customer</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">ns1:TestBody</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">ns1:TestMessage</span>&gt;</span>
</code></pre>
<p>Now we would like to validate some elements in this message using XPath</p>
<pre><code class="lang-xml"><span class="hljs-tag">&lt;<span class="hljs-title">message</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">validate</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">xpath</span> <span class="hljs-attribute">expression</span>=<span class="hljs-value">&quot;//TestMessage/TestHeader/VersionId&quot;</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">&quot;2&quot;</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">xpath</span> <span class="hljs-attribute">expression</span>=<span class="hljs-value">&quot;//TestMessage/TestHeader/CorrelationId&quot;</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">&quot;${correlationId}&quot;</span>/&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">validate</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">message</span>&gt;</span>
</code></pre>
<p>The validation will fail although the XPath expression looks correct regarding the XML tree. Because the message uses the namespace <strong><em>xmlns:ns1=&quot;<a href="http://citrus.com/namespace" target="_blank">http://citrus.com/namespace</a>&quot;</em></strong> with its prefix <strong><em>ns1</em></strong> our XPath expression is not able to find the elements. The correct XPath expression uses the namespace prefix as defined in the message.</p>
<pre><code class="lang-xml"><span class="hljs-tag">&lt;<span class="hljs-title">message</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">validate</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">xpath</span> <span class="hljs-attribute">expression</span>=<span class="hljs-value">&quot;//ns1:TestMessage/ns1:TestHeader/ns1:VersionId&quot;</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">&quot;2&quot;</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">xpath</span> <span class="hljs-attribute">expression</span>=<span class="hljs-value">&quot;//ns1:TestMessage/ns1:TestHeader/ns1:CorrelationId&quot;</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">&quot;${correlationId}&quot;</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">message</span>&gt;</span>
</code></pre>
<p>Now the expressions work fine and the validation is successful. But this is quite error prone. This is because the test is now depending on the namespace prefix that is used by some application. As soon as the message is sent with a different namespace prefix (e.g. ns2) the validation will fail again.</p>
<p>You can avoid this effect when specifying your own namespace context and your own namespace prefix during validation.</p>
<pre><code class="lang-xml"><span class="hljs-tag">&lt;<span class="hljs-title">message</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">validate</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">xpath</span> <span class="hljs-attribute">expression</span>=<span class="hljs-value">&quot;//pfx:TestMessage/pfx:TestHeader/pfx:VersionId&quot;</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">&quot;2&quot;</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">xpath</span> <span class="hljs-attribute">expression</span>=<span class="hljs-value">&quot;//pfx:TestMessage/pfx:TestHeader/pfx:CorrelationId&quot;</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">&quot;${correlationId}&quot;</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">namespace</span> <span class="hljs-attribute">prefix</span>=<span class="hljs-value">&quot;pfx&quot;</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">&quot;http://citrus.com/namespace&quot;</span>/&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">validate</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">message</span>&gt;</span>
</code></pre>
<p>Now the test in independent from any namespace prefix in the received message. The namespace context will resolve the namespaces and find the elements although the message might use different prefixes. The only thing that matters is that the namespace value (<a href="http://citrus.com/namespace" target="_blank">http://citrus.com/namespace</a>) matches.</p>
<p><strong>Tip</strong>
Instead of this namespace context on validation level you can also have a global namespace context which is valid in all test cases. We just add a bean in the basic Spring application context configuration which defines global namespace mappings.</p>
<pre><code class="lang-xml"><span class="hljs-tag">&lt;<span class="hljs-title">namespace-context</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">namespace</span> <span class="hljs-attribute">prefix</span>=<span class="hljs-value">&quot;def&quot;</span> <span class="hljs-attribute">uri</span>=<span class="hljs-value">&quot;http://www.consol.de/samples/sayHello&quot;</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">namespace-context</span>&gt;</span>
</code></pre>
<p>Once defined the <strong>def</strong> namespace prefix is valid in all test cases and all XPath expressions. This enables you to free your test cases from namespace prefix bindings that might be broken with time. You can use these global namespace mappings wherever XPath expressions are valid inside a test case (validation, ignore, extract).</p>
<h3 id="default-namespaces-in-xpath"><a name="default-namespaces-in-xpath" class="plugin-anchor" href="#default-namespaces-in-xpath"><span class="fa fa-link"></span></a>Default namespaces in XPath</h3>
<p>In the previous section we have seen that XML namespaces can get tricky with XPath validation. Default namespaces can do even more! So lets look at the example with default namespaces:</p>
<pre><code class="lang-xml"><span class="hljs-tag">&lt;<span class="hljs-title">TestMessage</span> <span class="hljs-attribute">xmlns</span>=<span class="hljs-value">&quot;http://citrus.com/namespace&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">TestHeader</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">CorrelationId</span>&gt;</span>_<span class="hljs-tag">&lt;/<span class="hljs-title">CorrelationId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">Timestamp</span>&gt;</span>2001-12-17T09:30:47.0Z<span class="hljs-tag">&lt;/<span class="hljs-title">Timestamp</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">VersionId</span>&gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-title">VersionId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">TestHeader</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">TestBody</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">Customer</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">Id</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-title">Id</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">Customer</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">TestBody</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">TestMessage</span>&gt;</span>
</code></pre>
<p>The message uses default namespaces. The following approach in XPath will fail due to namespace problems.</p>
<pre><code class="lang-xml"><span class="hljs-tag">&lt;<span class="hljs-title">message</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">validate</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">xpath</span> <span class="hljs-attribute">expression</span>=<span class="hljs-value">&quot;//TestMessage/TestHeader/VersionId&quot;</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">&quot;2&quot;</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">xpath</span> <span class="hljs-attribute">expression</span>=<span class="hljs-value">&quot;//TestMessage/TestHeader/CorrelationId&quot;</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">&quot;${correlationId}&quot;</span>/&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">validate</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">message</span>&gt;</span>
</code></pre>
<p>Even default namespaces need to be specified in the XPath expressions. Look at the following code listing that works fine with default namespaces:</p>
<pre><code class="lang-xml"><span class="hljs-tag">&lt;<span class="hljs-title">message</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">validate</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">xpath</span> <span class="hljs-attribute">expression</span>=<span class="hljs-value">&quot;//:TestMessage/:TestHeader/:VersionId&quot;</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">&quot;2&quot;</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">xpath</span> <span class="hljs-attribute">expression</span>=<span class="hljs-value">&quot;//:TestMessage/:TestHeader/:CorrelationId&quot;</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">&quot;${correlationId}&quot;</span>/&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">validate</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">message</span>&gt;</span>
</code></pre>
<p><strong>Tip</strong>
It is recommended to use the namespace context as described in the previous chapter when validating. Only this approach ensures flexibility and stable test cases regarding namespace changes.</p>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="./validation-gzip.html" class="navigation navigation-prev " aria-label="Previous page: Gzip"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="./json-path.html" class="navigation navigation-next " aria-label="Next page: JsonPath"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="gitbook/app.js"></script>

    
    <script src="gitbook/plugins/gitbook-plugin-edit-link/plugin.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-code_tomorrow_scheme/code-tomorrow-scheme.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-code_tomorrow_scheme/plugin.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-search/lunr.min.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-search/search.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-sharing/buttons.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-fontsettings/buttons.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"edit-link":{"base":"https://github.com/christophd/citrus/edit/master/src/manual","label":"Improve This Page"},"anchors":{},"code_tomorrow_scheme":{},"highlight":{},"search":{"maxIndexSize":1000000},"sharing":{"all":["facebook","google","twitter","weibo","instapaper"],"facebook":true,"google":false,"instapaper":false,"twitter":true,"vk":false,"weibo":false},"fontsettings":{"family":"sans","size":2,"theme":"white"}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
