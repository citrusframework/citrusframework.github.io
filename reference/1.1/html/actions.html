<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Chapter&nbsp;6.&nbsp;Test actions</title><link rel="stylesheet" href="reference-html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.75.2"><link rel="home" href="index.html" title="Citrus Framework - Reference Documentation"><link rel="up" href="index.html" title="Citrus Framework - Reference Documentation"><link rel="prev" href="messaging.html" title="Chapter&nbsp;5.&nbsp;Messaging"><link rel="next" href="templates.html" title="Chapter&nbsp;7.&nbsp;Templates"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter&nbsp;6.&nbsp;Test actions</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="messaging.html">Prev</a>&nbsp;</td><th width="60%" align="center">&nbsp;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="templates.html">Next</a></td></tr></table><hr></div><div class="chapter" title="Chapter&nbsp;6.&nbsp;Test actions"><div class="titlepage"><div><div><h2 class="title"><a name="actions"></a>Chapter&nbsp;6.&nbsp;Test actions</h2></div></div></div><p>This chapter gives a brief description to all test actions that a tester can incorporate into the test case. 
  Besides sending and receiving messages the tester may access these actions in order to build a more complex test scenario
  that fits the desired use case.</p><div class="section" title="6.1.&nbsp;Connecting to the database"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="actions-database"></a>6.1.&nbsp;Connecting to the database</h2></div></div></div><p>In many cases it is necessary to access the database during a test. This enables a tester to also validate 
    the persistent data in a database. It might also be helpful to prepare the database with some test data before running a test. 
    You can do this using the two database actions that are descirbed in the following sections.</p><div class="section" title="6.1.1.&nbsp;Updating the database"><div class="titlepage"><div><div><h3 class="title"><a name="actions-database-update"></a>6.1.1.&nbsp;Updating the database</h3></div></div></div><p>The &lt;sql&gt; action simply executes a group of SQL statements in order to change data in a database.
      Typically the action is used to prepare the database at the beginning of a test or to clean up the
      database at the end of a test. You can specify SQL statements like INSERT, UPDATE,
      DELETE, CREATE TABLE, ALTER TABLE and many more.</p><p>On the one hand you can specify the statements as inline SQL or stored in an external
      SQL resource file as shown in the next two examples.</p><pre class="programlisting"><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;actions&gt;</span>
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;sql</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">datasource</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"someDataSource"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&gt;</span>
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;statement&gt;</span>DELETE FROM CUSTOMERS<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/statement&gt;</span>
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;statement&gt;</span>DELETE FROM ORDERS<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/statement&gt;</span>
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/sql&gt;</span>
    
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;sql</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">datasource</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"myDataSource"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&gt;</span>
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;resource</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">file</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"file:tests/unit/resources/script.sql"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">/&gt;</span>
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/sql&gt;</span>
<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/actions&gt;</span></pre><p>The first action uses inline SQL statements defined directly inside the test case. The next action uses an external 
      SQL resource file instead. The file resource can hold several SQL statements separated by new lines. All statements inside 
      the file are executed sequentially by the framework.</p><div class="important" title="Important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="images/admons/important.png"></td><th align="left">Important</th></tr><tr><td align="left" valign="top"><p>You have to pay attention to some rules when dealing with external SQL resources.</p><div class="itemizedlist"><ul class="itemizedlist" type="opencircle"><li class="listitem" style="list-style-type: circle"><p>Each statement should begin in a new line</p></li><li class="listitem" style="list-style-type: circle"><p>It is not allowed to define statements with word wrapping</p></li><li class="listitem" style="list-style-type: circle"><p>Comments begin with two dashes "--"</p></li></ul></div></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/admons/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>The external file is referenced either as file system resource or class path resource,
        by using the "file:" or "classpath:" prefix.</p></td></tr></table></div><p>Both examples use the "datasource" attribute. This value defines the database data source to be used. The connection to
      a data source is mandatory, because the test case does not know about user credentials or database names. The 'datasource' attribute 
      references predefined data sources that are located in a separate Spring configuration file.</p></div><div class="section" title="6.1.2.&nbsp;Verifying data from the database"><div class="titlepage"><div><div><h3 class="title"><a name="actions-database-query"></a>6.1.2.&nbsp;Verifying data from the database</h3></div></div></div><p>The &lt;sql&gt; action is specially designed to execute SQL queries (SELECT * FROM). So the test is able to get data from a database. 
      The query results are validated against expected data as shown in the next example.</p><pre class="programlisting"><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;sql</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">datasource</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"testDataSource"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&gt;</span>
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;statement&gt;</span>select NAME from CUSTOMERS where ID='${customerId}'<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/statement&gt;</span>
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;statement&gt;</span>select count(*) from ERRORS<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/statement&gt;</span>
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;statement&gt;</span>select ID from ORDERS where DESC LIKE 'Def%'<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/statement&gt;</span>
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;statement&gt;</span>select DESCRIPTION from ORDERS where ID='${id}'<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/statement&gt;</span>
    
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;validate</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">column</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"ID"</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">value</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"1"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">/&gt;</span>
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;validate</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">column</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"NAME"</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">value</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"Deppisch"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">/&gt;</span>
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;validate</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">column</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"COUNT(*)"</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">value</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"${rowsCount}"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">/&gt;</span>
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;validate</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">column</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"DESCRIPTION"</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">value</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"null"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">/&gt;</span>
<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/sql&gt;</span></pre><p>The action &lt;sql&gt; offers a wide range of validating functionality for database result sets. First
      of all you have to select the data via SQL statements. Here again you have the choice to use inline SQL
      statements or external file resource pattern.</p><p>The result sets are validated through &lt;validate&gt; elements. It is possible to do a detailed check on
      every selected column of the result set. Simply refer to the selected column name in order to validate its
      value. The usage of test variables is supported as well as database expressions like count(), avg(), min(),
      max().</p><p>You simply define the &lt;validate&gt; entry with the column name as the "column" attribute and any expected
      value expression as expected "value". The framework then will check the column to fit the expected value and raise 
      validation errors in case of mismatch.</p><p>Looking at the first SELECT statement in the example you will see that test variables are supported in the 
      SQL statements. The framework will replace the variable with its respective value before sending it to the database.</p><p>In the validation section variables can be used too. Look at the third validation entry, where the variable
      "${rowsCount}" is used. The last validation in this example shows, that <code class="literal">NULL</code> values are 
      also supported as expected values.</p><p>If a single validation happens to fail, the whole action will fail with respective validation errors.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/admons/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>When validating database query result sets Citrus can only handle single rows. In case a result set holds 
        several rows only the first row is evaluated.</p></td></tr></table></div></div><div class="section" title="6.1.3.&nbsp;Read data from database"><div class="titlepage"><div><div><h3 class="title"><a name="actions-database-read-values"></a>6.1.3.&nbsp;Read data from database</h3></div></div></div><p>Now the validation of database entries is a very powerful feature but sometimes we simply do not know the
      persisted content values. The test may want to read database entries into test variables without validation. Citrus
      is able to do that with the following &lt;extract&gt; expressions:</p><pre class="programlisting"><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;sql</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">datasource</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"testDataSource"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&gt;</span>
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;statement&gt;</span>select ID from CUSTOMERS where NAME='${customerName}'<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/statement&gt;</span>
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;statement&gt;</span>select STATUS from ORDERS where ID='${orderId}'<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/statement&gt;</span>
    
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;extract</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">column</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"ID"</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">variable</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"${customerId}"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">/&gt;</span>
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;extract</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">column</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"STATUS"</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">variable</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"${orderStatus}"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">/&gt;</span>
<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/sql&gt;</span></pre><p>We can save the database column values directly to test variables. Of course you can combine the value extraction 
      with the normal column validation described earlier in this chapter. Please keep in mind that we can not use these operations
      on result sets with multiple rows. Citrus will always use the first row in a result set.</p></div></div><div class="section" title="6.2.&nbsp;Sleep"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="actions-sleep"></a>6.2.&nbsp;Sleep</h2></div></div></div><p>This action shows how to make the test framework sleep for a given amount of time. The attribute 'time' defines 
    the amount of time to wait in seconds. As shown in the next example decimal values are supported too. When no waiting time is
    specified the default time of 5.0 seconds applies.</p><pre class="programlisting"><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;testcase</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">name</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"sleepTest"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&gt;</span>
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;actions&gt;</span>
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;sleep</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">time</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"3.5"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">/&gt;</span>
        
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;sleep/&gt;</span>
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/actions&gt;</span>
<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/testcase&gt;</span></pre><p>When should somebody use this action? To us this action was always very useful in case the test needed to wait until 
    an application had done some work. For example in some cases the application took some time to write some data into the database.
    We waited then a small amount of time in order to avoid unnessesary test failures, because the test framework simply validated 
    the database too early. Or as another example the test may wait a given time until retry mechanisms are triggered in the tested
    application and then proceed with the test actions.</p></div><div class="section" title="6.3.&nbsp;Java"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="actions-java"></a>6.3.&nbsp;Java</h2></div></div></div><p>The test framework is written in Java and runs inside a Java virtual machine. The functionality of calling other 
    Java objects and methods in this same Java VM through Java Reflection is self-evident. 
    With this action you can call any Java API available at runtime through the specified Java classpath.</p><p>The action syntax looks like follows:</p><pre class="programlisting"><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;java</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">class</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"com.consol.citrus.test.util.InvocationDummy"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&gt;</span>
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;constructor&gt;</span>
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;argument</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">type</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">""</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&gt;</span>Test Invocation<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/argument&gt;</span>
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/constructor&gt;</span>
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;method</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">name</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"invoke"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&gt;</span>
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;argument</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">type</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"String[]"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&gt;</span>1,2<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/argument&gt;</span>
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/method&gt;</span>
<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/java&gt;</span>

<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;java</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">class</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"com.consol.citrus.test.util.InvocationDummy"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&gt;</span>
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;constructor&gt;</span>
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;argument</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">type</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">""</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&gt;</span>Test Invocation<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/argument&gt;</span>
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/constructor&gt;</span>
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;method</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">name</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"invoke"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&gt;</span>
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;argument</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">type</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"int"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&gt;</span>4<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/argument&gt;</span>
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;argument</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">type</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"String"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&gt;</span>Test Invocation<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/argument&gt;</span>
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;argument</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">type</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"boolean"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&gt;</span>true<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/argument&gt;</span>
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/method&gt;</span>
<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/java&gt;</span>
    
<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;java</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">class</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"com.consol.citrus.test.util.InvocationDummy"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&gt;</span>
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;method</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">name</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"main"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&gt;</span>
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;argument</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">type</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"String[]"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&gt;</span>4,Test,true <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/argument&gt;</span>
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/method&gt;</span>
<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/java&gt;</span></pre><p>The Java class is specified by fully qualified class name. Constructor arguments are added using the &lt;constructor&gt; 
    element with a list of &lt;argument&gt; child elements. The type of the argument is defined within the respective 
    attribute "type". By default the type would be String.</p><p>The invoked method on the Java object is simply referenced by its name. Method arguments do not bring anything new 
    after knowing the constructor argument definition, do they?.</p><p>Method arguments support data type conversion too, even string arrays (useful when
    calling CLIs). In the third action in the example code you can see that colon separated strings are automatically 
    converted to string arrays.</p><p>Simple data types are defined by their name (int, boolean, float etc.). Be sure that the invoked method
    and class constructor fit your arguments and vice versa, otherwise you will cause errors at runtime.</p></div><div class="section" title="6.4.&nbsp;Expect timeouts on a destination"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="actions-timeout"></a>6.4.&nbsp;Expect timeouts on a destination</h2></div></div></div><p>In some cases it might be necessary to validate that a message is <span class="emphasis"><em>not</em></span> present on a destination. 
    This means that this action expects a timeout when receiving a message from an endpoint destination. For instance the tester 
    intends to ensure that no message is sent to a certain destination in a time period. In that case the timeout would 
    not be a test aborting error but the expected behavior. And in contrast to the normal behavior when a message is received 
    in the time period the test will fail with error.</p><p>In order to validate such a timeout situation the action &lt;expectTimout&gt; shall help. The usage
    is very simple as the following example shows:</p><pre class="programlisting"><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;testcase</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">name</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"receiveJMSimeoutTest"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&gt;</span>
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;actions&gt;</span>
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;expect-timeout</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">message-receiver</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"myMessageReceiver"</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">wait</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"500"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">/&gt;</span>
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/actions&gt;</span>
<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/testcase&gt;</span></pre><p>The action offers two attributes:</p><div class="itemizedlist"><ul class="itemizedlist" type="opencircle"><li class="listitem" style="list-style-type: circle"><p><span class="emphasis"><em>message-receiver</em></span>: Reference to a message receiver that will try to receive messages.</p></li><li class="listitem" style="list-style-type: circle"><p><span class="emphasis"><em>wait</em></span>: Time period to wait for messages to arrive</p></li></ul></div><p>TODO: describe receive selected!</p></div><div class="section" title="6.5.&nbsp;Echo"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="actions-echo"></a>6.5.&nbsp;Echo</h2></div></div></div><p>The &lt;echo&gt; action prints messages to the console/logger. This functionality is useful when
    debugging test runs. The property "message" defines the text that is printed. Tester might use it to print
    out debug messages and variables as shown the next code example:</p><pre class="programlisting"><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;testcase</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">name</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"echoTest"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&gt;</span>
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;variables&gt;</span>
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;variable</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">name</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"date"</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">value</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"citrus:currentDate()"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">/&gt;</span>
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/variables&gt;</span>
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;actions&gt;</span>
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;echo&gt;</span>
            <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;message&gt;</span>Hello Test Framework<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/message&gt;</span>
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/echo&gt;</span>
        
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;echo&gt;</span>
            <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;message&gt;</span>Current date is: ${date}<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/message&gt;</span>
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/echo&gt;</span>
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/actions&gt;</span>
<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/testcase&gt;</span></pre><p>Result on the console:</p><pre class="programlisting">Hello Test Framework
Current time is: 05.08.2008</pre></div><div class="section" title="6.6.&nbsp;Time measurement"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="actions-measure-time"></a>6.6.&nbsp;Time measurement</h2></div></div></div><p>Time measurement during a test can be very helpful. The &lt;trace-time&gt; action creates and monitors 
    multiple timelines. The action offers the attribute "id" to identify a time line. The tester can of course 
    use more than one time line with different ids simultaneously.</p><p>Read the next example and you will understand the mix of different time lines:</p><pre class="programlisting"><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;testcase</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">name</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"timeWatcherTest_new"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&gt;</span>
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;actions&gt;</span>
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;trace-time/&gt;</span>
        
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;trace-time</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">id</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"time_line_id"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">/&gt;</span>
        
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;sleep</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">time</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"3.5"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">/&gt;</span>
        
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;trace-time</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">id</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">" time_line_id "</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">/&gt;</span>
        
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;sleep</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">time</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"5.0"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">/&gt;</span>
        
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;trace-time/&gt;</span>
        
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;trace-time</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">id</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">" time_line_id "</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">/&gt;</span>
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/actions&gt;</span>
<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/testcase&gt;</span></pre><p>The test output looks like follows:</p><pre class="programlisting">Starting TimeWatcher:
Starting TimeWatcher: time_line_id
TimeWatcher time_line_id after 3.5 seconds
TimeWatcher after 8.5 seconds
TimeWatcher time_line_id after 8.5 seconds</pre><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/admons/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top">In case no time line id is specified the framework will measure the time for a default time line.</td></tr></table></div><p>To print out the current elapsed time for a time line you simply have to place the &lt;trace-time&gt; action into
    the action chain again and again, using the respective time line identifier. The elapsed time will be printed out to the console every time.</p></div><div class="section" title="6.7.&nbsp;Create variables"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="actions-create-variables"></a>6.7.&nbsp;Create variables</h2></div></div></div><p>As you know variables usually are defined at the beginning of the test case (<a class="xref" href="testcase.html#testcase-variables" title="3.1.2.&nbsp;Variables">Section&nbsp;3.1.2, &#8220;Variables&#8221;</a>). 
    It might also be helpful to reset existing variables as well as to define new variables during the test. The 
    action &lt;create-variables&gt; is able to declare new variables or overwrite existing ones.</p><pre class="programlisting"><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;testcase</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">name</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"createVariablesTest"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&gt;</span>
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;variables&gt;</span>
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;variable</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">name</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"myVariable"</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">value</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"12345"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">/&gt;</span>
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;variable</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">name</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"id"</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">value</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"54321"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">/&gt;</span>
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/variables&gt;</span>
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;actions&gt;</span>
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;echo&gt;</span>
            <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;message&gt;</span>Current variable value: ${myVariable} <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/message&gt;</span>
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/echo&gt;</span>
        
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;create-variables&gt;</span>
            <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;variable</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">name</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"myVariable"</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">value</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"${id}"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">/&gt;</span>
            <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;variable</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">name</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"newVariable"</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">value</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"'this is a test'"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">/&gt;</span>
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/create-variables&gt;</span>
        
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;echo&gt;</span>
            <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;message&gt;</span>Current variable value: ${myVariable} <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/message&gt;</span>
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/echo&gt;</span>
    
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;echo&gt;</span>
            <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;message&gt;</span>
              New variable 'newVariable' has the value: ${newVariable}
            <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/message&gt;</span>
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/echo&gt;</span>
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/actions&gt;</span>
<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/testcase&gt;</span></pre><p>The new variables are valid for the rest of the test. Actions reference them as usual through a variable expression.</p></div><div class="section" title="6.8.&nbsp;Trace variables"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="actions-trace"></a>6.8.&nbsp;Trace variables</h2></div></div></div><p>You already know the &lt;echo&gt; action that prints messages to the console or logger. The
    &lt;trace-variables&gt; action is specially designed to trace all currently valid test variables to the console. 
    This was mainly used by us for debug reasons. The usage is quite simple:</p><pre class="programlisting"><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;testcase</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">name</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"traceVariablesTest"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&gt;</span>
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;variables&gt;</span>
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;variable</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">name</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"myVariable"</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">value</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"12345"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">/&gt;</span>
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;variable</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">name</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"nextVariable"</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">value</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"54321"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">/&gt;</span>
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/variables&gt;</span>
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;actions&gt;</span>
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;trace-variables&gt;</span>
            <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;variable</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">name</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"myVariable"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">/&gt;</span>
            <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;variable</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">name</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"nextVariable"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">/&gt;</span>
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/trace-variables&gt;</span>
        
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;trace-variables/&gt;</span>
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/actions&gt;</span>
<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/testcase&gt;</span></pre><p>Simply add the &lt;trace-variables&gt; action to your action chain and all variables will be printed out to
    the console. You are able to define a special set of variables by using the &lt;variable&gt; child
    elements. See the output that was generated by the test example above:</p><pre class="programlisting">Current value of variable myVariable = 12345
Current value of variable nextVariable = 54321</pre></div><div class="section" title="6.9.&nbsp;Groovy support"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="actions-groovy"></a>6.9.&nbsp;Groovy support</h2></div></div></div><p>Groovy is an agile dynamic language for the Java Platform. Groovy ships with a lot of 
    very powerful features and fits perfectly with Java as it is based on Java and runs
    inside the JVM.</p><p>The Citrus Groovy support might be the entrance for you to write customized test actions. 
    You can easily execute Groovy code inside a test case, just like a normal test action. The 
    whole test context with all variables is available to the Groovy action. This means someone
    can change variable values or create new variables very easily.</p><p>Lets have an example to show the possible Groovy code interactions in Citrus:</p><pre class="programlisting"><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;testcase</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">name</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"groovyTest"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&gt;</span>
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;variables&gt;</span>
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;variable</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">name</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"time"</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">value</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"citrus:currentDate()"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">/&gt;</span>
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/variables&gt;</span>
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;actions&gt;</span>
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;groovy&gt;</span>
            println 'Hello TestSuite'
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/groovy&gt;</span>
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;groovy&gt;</span>
            println 'The variable is: ${time}'
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/groovy&gt;</span>
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;groovy&gt;</span>
            <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;![CDATA[</span>
                import com.consol.citrus.*
                import com.consol.citrus.variable.*
                import com.consol.citrus.context.TestContext
                import com.consol.citrus.script.GroovyAction.ScriptExecutor
                
                public class GScript implements ScriptExecutor {
                    public void execute(TestContext context) {
                        println context.getVariable("time")
                    }
                }
            <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">]]&gt;</span>
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/groovy&gt;</span>
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;groovy</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">resource</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"classpath:com/consol/citrus/script/example.groovy"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">/&gt;</span>
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/actions&gt;</span>
<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/testcase&gt;</span></pre><p>As you can see it is possible to write Groovy code directly into the test case. 
    Citrus will execute the Groovy code and handle variable references automatically. The tester 
    is also able to write whole Groovy classes. The ScriptExecutor interface defines the execute
    method and provides access to the TestContext and its test variables. Citrus will take care of 
    the TestContext injection as a method parameter.</p><p>The last test action in our example refers to an external Groovy file resource. The external
    resource holds the Groovy code that is included into the test action chain.</p></div><div class="section" title="6.10.&nbsp;Failing the test"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="actions-fail"></a>6.10.&nbsp;Failing the test</h2></div></div></div><p>The fail action will generate an exception in order to terminate the test case with error. The test case will
    therefore not be successful in the reports.</p><p>The user can specify a custom error message for the exception in order to describe the error cause. Here is a 
    very simple example to clarify the syntax:</p><pre class="programlisting"><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;testcase</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">name</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"failTest"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&gt;</span>
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;actions&gt;</span>
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;fail</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">message</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"Test will fail with custom message"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">/&gt;</span>
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/actions&gt;</span>
<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/testcase&gt;</span></pre><p>Test results:</p><pre class="programlisting">Execution of test: failTest failed! Nested exception is: 
com.consol.citrus.exceptions.TestSuiteException: 
Test will fail with custom message

[...]

TEST RESULTS coreTestSuite

failTest          : failed - Exception is: Test will fail with custom message

Found 1 test cases to execute
Skipped 0 test cases (0.0%)
Executed 1 test cases, containing 3 actions
Tests failed:        1 (100.0%)
Tests successfully:  0 (0.0%) </pre></div><div class="section" title="6.11.&nbsp;Input"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="actions-input"></a>6.11.&nbsp;Input</h2></div></div></div><p>During the test case execution it is possible to read some user input from the command line. The test execution will 
    stop and wait for keyboard inputs over the standard input stream. The user has to type the input and end it with the return 
    key.</p><p>The user input is stored to the respective variable value.</p><pre class="programlisting"><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;testcase</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">name</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"inputTest"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&gt;</span>
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;variables&gt;</span>
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;variable</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">name</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"userinput"</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">value</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">""</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&gt;</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/variable&gt;</span>
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;variable</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">name</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"userinput1"</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">value</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">""</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&gt;</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/variable&gt;</span>
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;variable</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">name</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"userinput2"</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">value</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"y"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&gt;</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/variable&gt;</span>
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;variable</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">name</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"userinput3"</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">value</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"yes"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&gt;</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/variable&gt;</span>
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;variable</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">name</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"userinput4"</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">value</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">""</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&gt;</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/variable&gt;</span>
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/variables&gt;</span>
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;actions&gt;</span>
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;input/&gt;</span>
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;echo&gt;</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;message&gt;</span>user input was: ${userinput}<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/message&gt;</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/echo&gt;</span>
        
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;input</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">message</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"Now press enter:"</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">variable</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"userinput1"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">/&gt;</span>
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;echo&gt;</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;message&gt;</span>user input was: ${userinput1}<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/message&gt;</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/echo&gt;</span>
        
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;input</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">message</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"Do you want to continue?"</span> 
                  <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">valid-answers</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"y/n"</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">variable</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"userinput2"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">/&gt;</span>
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;echo&gt;</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;message&gt;</span>user input was: ${userinput2}<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/message&gt;</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/echo&gt;</span>
        
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;input</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">message</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"Do you want to continue?"</span> 
                  <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">valid-answers</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"yes/no"</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">variable</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"userinput3"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">/&gt;</span>
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;echo&gt;</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;message&gt;</span>user input was: ${userinput3}<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/message&gt;</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/echo&gt;</span>
        
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;input</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">variable</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"userinput4"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">/&gt;</span>
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;echo&gt;</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;message&gt;</span>user input was: ${userinput4}<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/message&gt;</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/echo&gt;</span>
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/actions&gt;</span>
<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/testcase&gt;</span></pre><p>The input action has following attributes:</p><div class="itemizedlist"><ul class="itemizedlist" type="opencircle"><li class="listitem" style="list-style-type: circle"><p><span class="emphasis"><em>message</em></span> -&gt; message displayed to the user</p></li><li class="listitem" style="list-style-type: circle"><p><span class="emphasis"><em>valid-answers</em></span> -&gt; optional slash separated string containing the possible answers</p></li><li class="listitem" style="list-style-type: circle"><p><span class="emphasis"><em>variable</em></span> -&gt; destination variable to store the user input (default = ${userinput})</p></li></ul></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/admons/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>When user input is restricted to a set of valid answers the input validation of course can fail due to mismatch. 
        In this case the user is again asked to provide the input until a valid answer is given.</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/admons/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>User inputs may not fit to automatic testing in terms of continuous integration testing where no user is present to 
        type in the correct answer over the keyboard. In this case you can always skip the user input in advance by specifying
        a variable that matches the user input variable name. As the user input variable is then already present the user 
        input is missed out and the test proceeds automatically.</p></td></tr></table></div></div><div class="section" title="6.12.&nbsp;Load"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="actions-load"></a>6.12.&nbsp;Load</h2></div></div></div><p>You are able to load properties from external property files and store them as test variables. The action will
    require a file resource either from class path or file system in order to read the property values.</p><p>Let us look at an example to get an idea about this action:</p><p>Content of load.properties:</p><pre class="programlisting">username=Mickey Mouse
greeting.text=Hello Test Framework</pre><pre class="programlisting"><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;testcase</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">name</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"loadPropertiesTest"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&gt;</span>
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;actions&gt;</span>
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;load&gt;</span>
            <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;properties</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">file</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"file:tests/resources/load.properties"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">/&gt;</span>
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/load&gt;</span>
        
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;trace-variables/&gt;</span>
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/actions&gt;</span>
<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/testcase&gt;</span></pre><p>Output:</p><pre class="programlisting">Current value of variable username = Mickey Mouse
Current value of variable greeting.text = Hello Test Framework</pre><p>The action will load all available properties in the file load.properties and store them to the test case
    as local variables.</p><div class="important" title="Important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="images/admons/important.png"></td><th align="left">Important</th></tr><tr><td align="left" valign="top"><p>Existing variables are overwritten!</p></td></tr></table></div></div><div class="section" title="6.13.&nbsp;Purging JMS destinations"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="actions-purge"></a>6.13.&nbsp;Purging JMS destinations</h2></div></div></div><p>Purging JMS destinations during the test run is quite essential. Different test cases can influence each other when sending
    messages to the same JMS destinations. A test case should only receive those messages that actually belong to it. Therefore it is a 
    good idea to purge all JMS queue destinations between the test cases. Obsolete messages that are stuck in a JMS queue for some 
    reason are then removed so that the following test case is not offended.</p><p>So we need to purge some JMS queues in out test case. This can be done with following action definition:</p><pre class="programlisting"><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;testcase</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">name</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"purgeTest"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&gt;</span>
  <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;actions&gt;</span>
      <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;purge-jms-queues&gt;</span>
          <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;queue</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">name</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"Some.JMS.QUEUE.Name"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">/&gt;</span>
          <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;queue</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">name</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"Another.JMS.QUEUE.Name"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">/&gt;</span>
          <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;queue</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">name</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"My.JMS.QUEUE.Name"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">/&gt;</span>
      <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/purge-jms-queues&gt;</span>
      
      <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;purge-jms-queues</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">connection-factory</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"connectionFactory"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&gt;</span>
          <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;queue</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">name</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"Some.JMS.QUEUE.Name"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">/&gt;</span>
          <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;queue</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">name</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"Another.JMS.QUEUE.Name"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">/&gt;</span>
          <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;queue</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">name</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"My.JMS.QUEUE.Name"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">/&gt;</span>
      <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/purge-jms-queues&gt;</span>
  <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/actions&gt;</span>
<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/testcase&gt;</span></pre><p>Purging the JMS queues in every test case is quite exhausting because every test case needs to define a purging action at the 
    very beginning of the test. Fortunately the test suite definition offers tasks to run before, between and after the test cases which 
    should ease up this tasks a lot. The test suite offers a very simple way to purge the destinations between the tests. 
    See <a class="xref" href="testsuite.html#testsuite-tasks" title="16.1.&nbsp;Tasks before, between and after the test run">Section&nbsp;16.1, &#8220;Tasks before, between and after the test run&#8221;</a> for more information about this.</p><p>When using the special tasks between a test case you might define a normal Spring bean definition that is referenced then. The 
    'com.consol.citrus.actions.PurgeJmsQueuesAction' action offers the property "queueNames" to hold all destination names 
    that are supposed to be purged. As you can see in the next example it is quite easy to specify a group of destinations in the Spring configuration.
    This purging bean is then added to the test suite in the tasks between section.</p><pre class="programlisting"><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;bean</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">id</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"purgeJmsQueues"</span>
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">class</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"com.consol.citrus.actions.PurgeJmsQueuesAction"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&gt;</span>
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;property</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">name</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"connectionFactory"</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">ref</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"jmsQueueConnectionFactory"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">/&gt;</span>
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;property</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">name</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"queueNames"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&gt;</span>
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;list&gt;</span>
            <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;value&gt;</span>${jms.queue.hello.request.in}<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/value&gt;</span>
            <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;value&gt;</span>${jms.queue.hello.response.out}<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/value&gt;</span>
            <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;value&gt;</span>${jms.queue.echo.request}<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/value&gt;</span>
            <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;value&gt;</span>${jms.queue.echo.response}<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/value&gt;</span>
            <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;value&gt;</span>JMS.Queue.Dummy<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/value&gt;</span>
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/list&gt;</span>
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/property&gt;</span>
<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/bean&gt;</span></pre><p>So now we are able to purge JMS destinations with given destination names. But sometimes we do not want to rely on queue or topic names as 
    we retrieve destinations over JNDI for instance. We can deal with destinations coming from JNDI lookup like follows:</p><pre class="programlisting"><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;jee:jndi-lookup</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">id</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"jmsQueueHelloRequestIn"</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">jndi-name</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"jms/jmsQueueHelloRequestIn"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">/&gt;</span>
<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;jee:jndi-lookup</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">id</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"jmsQueueHelloResponseOut"</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">jndi-name</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"jms/jmsQueueHelloResponseOut"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">/&gt;</span>

<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;bean</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">id</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"purgeJmsQueues"</span>
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">class</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"com.consol.citrus.actions.PurgeJmsQueuesAction"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&gt;</span>
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;property</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">name</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"connectionFactory"</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">ref</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"jmsQueueConnectionFactory"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">/&gt;</span>
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;property</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">name</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"queues"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&gt;</span>
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;list&gt;</span>
            <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;ref</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">bean</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"jmsQueueHelloRequestIn"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">/&gt;</span>
            <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;ref</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">bean</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"jmsQueueHelloResponseOut"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">/&gt;</span>
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/list&gt;</span>
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/property&gt;</span>
<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/bean&gt;</span></pre><p>We just use the property <span class="emphasis"><em>'queues'</em></span> instead of <span class="emphasis"><em>'queueNames'</em></span> and Citrus will be able to receive 
    bean references that resolve to JMS destinations. We can purge these destination references in a test case, too. Just use the <span class="emphasis"><em>'ref'</em></span>
    attribute instead of already known <span class="emphasis"><em>'name'</em></span> attribute:</p><pre class="programlisting"><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;testcase</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">name</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"purgeTest"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&gt;</span>
  <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;actions&gt;</span>
      <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;purge-jms-queues&gt;</span>
          <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;queue</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">ref</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"jmsQueueHelloRequestIn"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">/&gt;</span>
          <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;queue</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">ref</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"jmsQueueHelloResponseOut"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">/&gt;</span>
      <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/purge-jms-queues&gt;</span>
  <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/actions&gt;</span>
<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/testcase&gt;</span></pre></div><div class="section" title="6.14.&nbsp;Assert failure"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="actions-assert"></a>6.14.&nbsp;Assert failure</h2></div></div></div><p>Citrus test actions fail with Java exceptions and error messages. This gives you the opportunity to expect an action to fail during test
    execution. You can simple assert a Java exception to be thrown during execution. See the example for an assert action definition in a test case:</p><pre class="programlisting"><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;testcase</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">name</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"assertFailureTest"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&gt;</span>
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;actions&gt;</span>
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;assert</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">exception</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"com.consol.citrus.exceptions.CitrusRuntimeException"</span>
                   <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">message</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"Unknown variable ${date}"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&gt;</span>
            <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;echo&gt;</span>
                <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;message&gt;</span>Current date is: ${date}<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/message&gt;</span>
            <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/echo&gt;</span>
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/assert&gt;</span>
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/actions&gt;</span>
<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/testcase&gt;</span></pre><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/admons/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>Note that the assert action requires an exception. In case no exception is thrown by the embedded test action the assertion
        and the test case will fail!</p></td></tr></table></div><p>The assert action always wraps a single test action, which is then monitored for failure. In case the nested test action fails with error you
    can validate the error in its type and error message (optional). The failure has to fit the expected one exactly otherwise the assertion fails itself.</p><div class="important" title="Important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="images/admons/important.png"></td><th align="left">Important</th></tr><tr><td align="left" valign="top"><p>Important to notice is the fact that asserted exceptions do not cause failure of the test case. As you except the failure to happen the test continues
        with its work once the assertion is done successfully.</p></td></tr></table></div></div><div class="section" title="6.15.&nbsp;Catch exceptions"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="actions-catch"></a>6.15.&nbsp;Catch exceptions</h2></div></div></div><p>In the previous chapter we learned how to expect failures in Citrus with assert action. Now the assert action is designed for one single
    action to be monitored for failures. The <span class="emphasis"><em>'catch'</em></span> action in contrary will hold several nested test actions and catch 
    possible errors. The nested actions are error proof for the chosen exception type, but only for the chosen exception type other exception 
    types may cause the test to fail.</p><pre class="programlisting"><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;testcase</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">name</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"catchExceptionTest"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&gt;</span>
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;actions&gt;</span>
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;catch</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">exception</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"com.consol.citrus.exceptions.CitrusRuntimeException"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&gt;</span>
            <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;echo&gt;</span>
                <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;message&gt;</span>Current date is: ${date}<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/message&gt;</span>
            <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/echo&gt;</span>
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/catch&gt;</span>
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/actions&gt;</span>
<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/testcase&gt;</span></pre><div class="important" title="Important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="images/admons/important.png"></td><th align="left">Important</th></tr><tr><td align="left" valign="top"><p>Note that there is no validation available in a catch block. So catching exceptions is just to make a test more stable towards
        errors that can occur. The caught exception does not cause any failure in the test. The test case may continue with execution as if there was not failure.
        Also notice that the catch action is also happy when no exception at all is caught. In contrary to the assert action which requires the failure the catch
        block is not failing in positive processing.</p></td></tr></table></div><p>Catching exceptions like this may only fit to very error prone action blocks where failures do not harm the test case success. Otherwise a failure 
    in a test action should always reflect to the whole test case to fail with errors.</p></div><div class="section" title="6.16.&nbsp;Including own actions"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="actions-generic-action"></a>6.16.&nbsp;Including own actions</h2></div></div></div><p>The generic &lt;action&gt; element references Spring beans that implement the Java interface 
    <code class="literal">com.consol.citrus.TestAction</code>. This is a very fast way to add your own action 
    implementations to a test case. You can implement own actions in Java and include them into a test case.</p><pre class="programlisting"><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;testcase</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">name</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"actionReferenceTest"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&gt;</span>
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;actions&gt;</span>
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;action</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">reference</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"cleanUpDatabase"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">/&gt;</span>
        <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;action</span> <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-attribute">reference</span>=<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-value">"mySpecialAction"</span><span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">/&gt;</span>
    <span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/actions&gt;</span>
<span xmlns="http://www.w3.org/TR/xhtml1/transitional" class="hl-tag">&lt;/testcase&gt;</span></pre><p>In the example above the called actions are special database cleanup implementations. The actions are defined as Spring beans 
    in the Citrus configuration and get referenced by their bean name or id.</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="messaging.html">Prev</a>&nbsp;</td><td width="20%" align="center">&nbsp;</td><td width="40%" align="right">&nbsp;<a accesskey="n" href="templates.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter&nbsp;5.&nbsp;Messaging&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Chapter&nbsp;7.&nbsp;Templates</td></tr></table></div></body></html>