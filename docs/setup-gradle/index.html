<!DOCTYPE HTML>
<html lang="en-US">
<head>
  <meta charset="UTF-8">
  <title>Citrus Framework</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="generator" content="Citrus 3.0.0">
  <meta name="description" content="Citrus Framework Website"/>
  <meta name="author" content="ConSol Software GmbH"/>
  <link type="application/atom+xml" rel="alternate" href="http://0.0.0.0:4000/feed.xml" title="Citrus Integration Tests" />
  <link rel="alternate" type="application/atom+xml" title="Recent commits to Citrus master branch" href="https://github.com/citrusframework/citrus/commits/master.atom">
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic,900">
  <link rel="stylesheet" href="/css/screen.css">
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <!--[if lt IE 9]>
  <script src="/js/html5shiv.min.js"></script>
  <script src="/js/respond.min.js"></script>
  <![endif]-->
</head>


<body class="wrap">
  <header role="banner">
  <nav class="mobile-nav show-on-mobiles">
    <ul>
  <li>
    <img src="/img/brand-logo.png" alt="Citrus"><span class="brand hide-on-mobiles">Citrus</span>
  </li>
  <li class="">
    <a href="/">Home</a>
  </li>
  <li class="">
    <a href="/projects/">Projects</a>
  </li>
  <li class="current">
    <a href="/docs/home/">Doc<span class="hide-on-mobiles">umentation</span><span class="show-on-mobiles">s</span></a>
  </li>
  <li class="">
    <a href="/samples/">Samples</a>
  </li>
  <li class="">
    <a href="/news/">News<span class="hide-on-mobiles"> &amp; Blog</span></a>
  </li>
  <li class="">
    <a href="/help/">Help</a>
  </li>
  <li>
    <a href="https://github.com/citrusframework/citrus" target="_blank"><span class="hide-on-mobiles">View on </span>GitHub</a>
  </li>
</ul>

  </nav>
  <div class="grid">
    <nav class="main-nav whole hide-on-mobiles">
      <ul>
  <li>
    <img src="/img/brand-logo.png" alt="Citrus"><span class="brand hide-on-mobiles">Citrus</span>
  </li>
  <li class="">
    <a href="/">Home</a>
  </li>
  <li class="">
    <a href="/projects/">Projects</a>
  </li>
  <li class="current">
    <a href="/docs/home/">Doc<span class="hide-on-mobiles">umentation</span><span class="show-on-mobiles">s</span></a>
  </li>
  <li class="">
    <a href="/samples/">Samples</a>
  </li>
  <li class="">
    <a href="/news/">News<span class="hide-on-mobiles"> &amp; Blog</span></a>
  </li>
  <li class="">
    <a href="/help/">Help</a>
  </li>
  <li>
    <a href="https://github.com/citrusframework/citrus" target="_blank"><span class="hide-on-mobiles">View on </span>GitHub</a>
  </li>
</ul>

    </nav>
  </div>
</header>


    <section class="docs">
    <div class="grid">

      <div class="docs-nav-mobile unit whole show-on-mobiles">
  <select onchange="if (this.value) window.location.href=this.value">
    <option value="">Navigate the docs…</option>
    <option value="/docs/home">Home</option>
    
    <optgroup label="Getting Started">
      
  
  
  <option value="/docs/home/">Welcome</option>

  
  
  <option value="/docs/user-guide/">User Guide</option>

  
  
  <option value="/docs/setup-maven/">Setup with Maven</option>

  
  
  <option value="/docs/setup-gradle/">Setup with Gradle</option>

  
  
  <option value="/docs/setup-ant/">Setup with ANT</option>

  
  
  <option value="/docs/features/">Features</option>

  
  
  <option value="/docs/download/">Download</option>


    </optgroup>
    
    <optgroup label="Sources">
      
  
  
  <option value="/docs/repository/">Source repository</option>

  
  
  <option value="/docs/issues/">Issues</option>

  
  
  <option value="/docs/development/">Development</option>

  
  
  <option value="/docs/contributing/">Contributing</option>

  
  
  <option value="/docs/conventions/">Conventions</option>

  
  
  <option value="/docs/conduct/">Code of Conduct</option>


    </optgroup>
    
    <optgroup label="Customize">
      
  
  
  <option value="/docs/custom-endpoints/"></option>

  
  
  <option value="/docs/custom-actions/">Custom actions</option>

  
  
  <option value="/docs/custom-functions/">Custom functions</option>


    </optgroup>
    
    <optgroup label="Tools">
      
  
  
  <option value="/docs/maven-plugin/">Maven plugin</option>

  
  
  <option value="/docs/maven-remote-plugin/">Maven remote plugin</option>


    </optgroup>
    
    <optgroup label="Miscellaneous">
      
  
  
  <option value="/docs/team/">Team</option>

  
  
  <option value="/docs/config-sheet/"></option>

  
  
  <option value="/docs/upgrade-migration/"></option>

  
  
  <option value="/docs/consulting/">Consulting</option>


    </optgroup>
    
    <optgroup label="Meta">
      
  
  
  <option value="/docs/license/">License</option>

  
  
  <option value="/docs/modules/">Modules</option>

  
  
  <option value="/docs/history/">History</option>


    </optgroup>
    
  </select>
</div>


      <div class="unit four-fifths">
        <article>
          <div class="improve right hide-on-mobiles">
            <a href="https://github.com/citrusframework/citrus-website/edit/master/src/main/site/_docs/setup-gradle.md"><i class="fa fa-pencil"></i>  Improve this page</a>
          </div>
          <h1>Setup with Gradle</h1>
          <p>This quickstart shows you how to setup a new Citrus project with Gradle. After that you will be able to get Citrus tests running 
within minutes. You can find the project sources on GitHub <a href="https://github.com/citrusframework/citrus-samples/blob/master/sample-gradle">citrus-samples/sample-gradle</a>.</p>

<h3 id="preconditions">Preconditions</h3>

<p>You need following software on your computer, in order to use the Citrus Framework:</p>

<ul>
  <li>
<strong>Java 8 or higher</strong>
Installed JDK plus JAVA_HOME environment variable set up and pointing to your Java installation directory</li>
  <li>
<strong>Java IDE</strong>
A Java IDE will help you manage your Citrus project, create and execute test cases. Just use the Java IDE that you are 
used to (e.g. <a href="http://www.eclipse.org/">Eclipse</a> or <a href="http://www.jetbrains.com/idea/">IntelliJ IDEA</a>).</li>
  <li>
<strong>Gradle 2.13 or higher</strong>
Citrus tests will be executed with the <a href="https://gradle.org/">Gradle</a> build tool.</li>
</ul>

<p>Citrus uses Maven internally for building software. But of course you can also integrate the Citrus tests in a Gradle
project. Since Citrus tests are nothing but normal JUnit or TestNG tests, integration into your Gradle build is very easy.</p>

<h3 id="gradle-project">Gradle project</h3>

<p>First, we create a new Java project called <em>citrus-sample</em>. There are multiple ways to get started with a Gradle project. I personally
prefer to use my Java IDE (IntelliJ) for generating a basic Gradle project setup. Of course there are lots of Gradle project start samples out there.
And summing up the Gradle project structure is pretts simple so you could also create this manually. Here is the basic project structure that we
are going to use in this quickstart.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>citrus-sample
  |   + src
  |   |   + main
  |   |    |   + java
  |   |    |   + resources
  |   |   + test
  |   |    |   + java
  |   |    |   + resources
build.gradle
settings.gradle
</code></pre></div></div>

<p>The Gradle build configuration is done in the <strong>build.gradle</strong> and <strong>settings.gradle</strong> files. Here we define the project name and the project version.</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">rootProject.name <span class="o">=</span> <span class="s1">'citrus-sample-gradle'</span>
group <span class="s1">'com.consol.citrus.samples'</span>
version <span class="s1">'3.0.0'</span></code></pre></figure>

<p>Now, since Citrus libraries are available on Maven central repository, we add these repositories so Gradle knows how to download the required
Citrus artifacts.</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">repositories <span class="o">{</span>
    mavenCentral<span class="o">()</span>
    maven <span class="o">{</span>
        url <span class="s1">'http://labs.consol.de/maven/snapshots-repository/'</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>Citrus stable release versions are available on Maven central. If you want to use the very latest snapshot version of Citrus you need
to also add the ConSol Labs snapshot repository as server. This is optional and only applies if you want to use the snapshot versions of Citrus.</p>

<p>Now lets move on with adding the Citrus libraries to the project.</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">dependencies <span class="o">{</span>
    testCompile group: <span class="s1">'com.consol.citrus'</span>, name: <span class="s1">'citrus-core'</span>, version: <span class="s1">'3.0.0'</span>
    testCompile group: <span class="s1">'com.consol.citrus'</span>, name: <span class="s1">'citrus-java-dsl'</span>, version: <span class="s1">'3.0.0'</span>
    testCompile group: <span class="s1">'org.testng'</span>, name: <span class="s1">'testng'</span>, version: <span class="s1">'${testng.version}'</span>
    <span class="o">[</span>...]
<span class="o">}</span></code></pre></figure>

<p>This enables the Citrus support for the project so we can use the Citrus classes and APIs. We decided to use TestNG unit test library.</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell"><span class="nb">test</span> <span class="o">{</span>
    useTestNG<span class="o">()</span>
<span class="o">}</span></code></pre></figure>

<blockquote>
  <p>Warning: This tutorial uses the TestNG unit test library. If you want to use JUnit, you will have to remove the above lines from your build.gradle file.</p>
</blockquote>

<p>Of course JUnit is also supported. This is all for build configuration settings. We can move on to writing some Citrus integration tests. The Java test classes
usually go to the <strong>src/test/java</strong> directory.</p>

<p>Lets write a simple Citrus test case in Java and save it to the <strong>src/test/java</strong> folder in package <strong>com.consol.citrus.samples</strong>.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kn">import</span> <span class="nn">com.consol.citrus.annotations.CitrusTest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.consol.citrus.channel.ChannelEndpoint</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.consol.citrus.dsl.testng.TestNGCitrusTestDesigner</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.consol.citrus.message.MessageType</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Qualifier</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.test.context.ContextConfiguration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.testng.annotations.Test</span><span class="o">;</span>

<span class="nd">@ContextConfiguration</span><span class="o">(</span><span class="n">classes</span> <span class="o">=</span> <span class="o">{</span> <span class="n">EndpointConfig</span><span class="o">.</span><span class="na">class</span> <span class="o">})</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MessagingTest</span> <span class="kd">extends</span> <span class="n">TestNGCitrusTestDesigner</span> <span class="o">{</span>

    <span class="nd">@Autowired</span>
    <span class="kd">private</span> <span class="n">ChannelEndpoint</span> <span class="n">testChannelEndpoint</span><span class="o">;</span>

    <span class="nd">@Test</span>
    <span class="nd">@CitrusTest</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testMessaging</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">echo</span><span class="o">(</span><span class="s">"Test simple message send and receive"</span><span class="o">);</span>

        <span class="n">send</span><span class="o">(</span><span class="n">testChannelEndpoint</span><span class="o">)</span>
            <span class="o">.</span><span class="na">messageType</span><span class="o">(</span><span class="n">MessageType</span><span class="o">.</span><span class="na">PLAINTEXT</span><span class="o">)</span>
            <span class="o">.</span><span class="na">payload</span><span class="o">(</span><span class="s">"Hello Citrus!"</span><span class="o">);</span>

        <span class="n">receive</span><span class="o">(</span><span class="n">testChannelEndpoint</span><span class="o">)</span>
            <span class="o">.</span><span class="na">messageType</span><span class="o">(</span><span class="n">MessageType</span><span class="o">.</span><span class="na">PLAINTEXT</span><span class="o">)</span>
            <span class="o">.</span><span class="na">payload</span><span class="o">(</span><span class="s">"Hello Citrus!"</span><span class="o">);</span>

        <span class="n">echo</span><span class="o">(</span><span class="s">"Successful send and receive"</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>This sample uses pure Java code for both Citrus configuration and tests. The
Citrus TestNG test uses a context configuration annotation.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@ContextConfiguration</span><span class="o">(</span><span class="n">classes</span> <span class="o">=</span> <span class="o">{</span> <span class="n">EndpointConfig</span><span class="o">.</span><span class="na">class</span> <span class="o">})</span></code></pre></figure>

<p>This tells Spring to load the configuration from the Java class <strong><em>EndpointConfig</em></strong>.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">EndpointConfig</span> <span class="o">{</span>
    <span class="nd">@Bean</span>
    <span class="kd">public</span> <span class="n">ChannelEndpoint</span> <span class="nf">testChannelEndpoint</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">ChannelEndpointConfiguration</span> <span class="n">endpointConfiguration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ChannelEndpointConfiguration</span><span class="o">();</span>
        <span class="n">endpointConfiguration</span><span class="o">.</span><span class="na">setChannel</span><span class="o">(</span><span class="n">testChannel</span><span class="o">());</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">ChannelEndpoint</span><span class="o">(</span><span class="n">endpointConfiguration</span><span class="o">);</span>
    <span class="o">}</span>
    
    <span class="nd">@Bean</span>
    <span class="kd">private</span> <span class="n">MessageChannel</span> <span class="nf">testChannel</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">MessageSelectingQueueChannel</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>In the configuration class we are able to define Citrus components for usage in tests. As usual
we can autowire the endpoint components as Spring beans in the test cases.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@Autowired</span>
<span class="kd">private</span> <span class="n">ChannelEndpoint</span> <span class="n">testChannelEndpoint</span><span class="o">;</span></code></pre></figure>

<h3 id="run">Run</h3>

<p>The sample application uses Gradle as build tool. So you can use the Gradle wrapper to compile, package and test the
sample with Gradle build.</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">gradlew clean build</code></pre></figure>

<p>This executes all Citrus test cases during the build and you will see Citrus performing some integration test logging output.
After the tests are finished build is successful and you are ready to go for writing some tests on your own.</p>

<p>If you just want to execute all tests you can call</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">gradlew clean check</code></pre></figure>

<p>Of course you can also start the Citrus tests from your favorite IDE.
Just start the Citrus test using the Gradle integration in IntelliJ, Eclipse or Netbeans.</p>

<p>So now you are ready to use Citrus! Write test cases and add more logic to the test project. Have fun with it!</p>

        </article>
      </div>

      <div class="unit one-fifth hide-on-mobiles">
  <aside>
    
    <h4>Getting Started</h4>
    <ul>

  
  
  <li class=""><a href="/docs/home/">Welcome</a></li>

  
  
  <li class=""><a href="/docs/user-guide/">User Guide</a></li>

  
  
  <li class=""><a href="/docs/setup-maven/">Setup with Maven</a></li>

  
  
  <li class="current"><a href="/docs/setup-gradle/">Setup with Gradle</a></li>

  
  
  <li class=""><a href="/docs/setup-ant/">Setup with ANT</a></li>

  
  
  <li class=""><a href="/docs/features/">Features</a></li>

  
  
  <li class=""><a href="/docs/download/">Download</a></li>

</ul>

    
    <h4>Sources</h4>
    <ul>

  
  
  <li class=""><a href="/docs/repository/">Source repository</a></li>

  
  
  <li class=""><a href="/docs/issues/">Issues</a></li>

  
  
  <li class=""><a href="/docs/development/">Development</a></li>

  
  
  <li class=""><a href="/docs/contributing/">Contributing</a></li>

  
  
  <li class=""><a href="/docs/conventions/">Conventions</a></li>

  
  
  <li class=""><a href="/docs/conduct/">Code of Conduct</a></li>

</ul>

    
    <h4>Customize</h4>
    <ul>

  
  
  <li class=""><a href="/docs/custom-endpoints/"></a></li>

  
  
  <li class=""><a href="/docs/custom-actions/">Custom actions</a></li>

  
  
  <li class=""><a href="/docs/custom-functions/">Custom functions</a></li>

</ul>

    
    <h4>Tools</h4>
    <ul>

  
  
  <li class=""><a href="/docs/maven-plugin/">Maven plugin</a></li>

  
  
  <li class=""><a href="/docs/maven-remote-plugin/">Maven remote plugin</a></li>

</ul>

    
    <h4>Miscellaneous</h4>
    <ul>

  
  
  <li class=""><a href="/docs/team/">Team</a></li>

  
  
  <li class=""><a href="/docs/config-sheet/"></a></li>

  
  
  <li class=""><a href="/docs/upgrade-migration/"></a></li>

  
  
  <li class=""><a href="/docs/consulting/">Consulting</a></li>

</ul>

    
    <h4>Meta</h4>
    <ul>

  
  
  <li class=""><a href="/docs/license/">License</a></li>

  
  
  <li class=""><a href="/docs/modules/">Modules</a></li>

  
  
  <li class=""><a href="/docs/history/">History</a></li>

</ul>

    
  </aside>
</div>


      <div class="clear"></div>

    </div>
  </section>


  <footer role="contentinfo">
  <div class="grid">
    <div class="unit one-third center-on-mobiles">
      <p>Citrus is open source and licensed under <br><a href="https://www.apache.org/licenses/LICENSE-2.0.html">Apache License 2.0</a>.</p>
      <p>This website is licensed under <br><a href="https://github.com/citrusframework/citrus/blob/master/LICENSE">MIT License</a>.</p>
      <br>
      <p>© 2021 ConSol Software GmbH</p>
    </div>
    <div class="unit one-third align-center center-on-mobiles">
      <p>
        <img src="/img/bmi_logo_eng.png" alt="Federal Ministry for Economic Affairs and Energy">
      </p>
    </div>
    <div class="unit one-third align-right center-on-mobiles">
      <p>
        Hosted by<br>
        <a href="http://www.consol.de">
          <img src="/img/sponsor-logo.png" alt="ConSol">
        </a>
      </p>
      <p> </p>
      <br>
      <br>
      <p>
        <a href="http://www.consol.com/legal-notice/">Legal notice</a> | <a href="https://www.consol.com/data-privacy/">Data privacy</a>
      </p>
    </div>
  </div>
</footer>

  <script>
  var anchorForId = function (id) {
    var anchor = document.createElement("a");
    anchor.className = "header-link";
    anchor.href      = "#" + id;
    anchor.innerHTML = "<span class=\"sr-only\">Permalink</span><i class=\"fa fa-link\"></i>";
    anchor.title = "Permalink";
    return anchor;
  };

  var linkifyAnchors = function (level, containingElement) {
    var headers = containingElement.getElementsByTagName("h" + level);
    for (var h = 0; h < headers.length; h++) {
      var header = headers[h];

      if (typeof header.id !== "undefined" && header.id !== "") {
        header.appendChild(anchorForId(header.id));
      }
    }
  };

  document.onreadystatechange = function () {
    if (this.readyState === "complete") {
      var contentBlock = document.getElementsByClassName("docs")[0] || document.getElementsByClassName("samples")[0] || document.getElementsByClassName("news")[0];
      if (!contentBlock) {
        return;
      }
      for (var level = 1; level <= 6; level++) {
        linkifyAnchors(level, contentBlock);
      }
    }
  };
</script>


</body>
</html>
