<!DOCTYPE HTML>
<html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="UTF-8">
  <title>Citrus Framework</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="generator" content="Citrus 2.7.6">
  <meta name="description" content="Citrus Framework Website">
  <meta name="author" content="ConSol Software GmbH">
  <link type="application/atom+xml" rel="alternate" href="https://citrusframework.org/feed.xml" title="Citrus Integration Tests">
  <link rel="alternate" type="application/atom+xml" title="Recent commits to Citrus master branch" href="https://github.com/citrusframework/citrus/commits/master.atom">
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic,900">
  <link rel="stylesheet" href="/css/screen.css">
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <!--[if lt IE 9]>
  <script src="/js/html5shiv.min.js"></script>
  <script src="/js/respond.min.js"></script>
  <![endif]-->
</head>


<body class="wrap">
  <header role="banner">
  <nav class="mobile-nav show-on-mobiles">
    <ul>
  <li>
    <img src="/img/brand-logo.png" alt="Citrus"><span class="brand hide-on-mobiles">Citrus</span>
  </li>
  <li class="">
    <a href="/">Home</a>
  </li>
  <li class="">
    <a href="/projects/">Projects</a>
  </li>
  <li class="">
    <a href="/docs/home/">Doc<span class="hide-on-mobiles">umentation</span><span class="show-on-mobiles">s</span></a>
  </li>
  <li class="current">
    <a href="/samples/">Samples</a>
  </li>
  <li class="">
    <a href="/news/">News<span class="hide-on-mobiles"> &amp; Blog</span></a>
  </li>
  <li class="">
    <a href="/help/">Help</a>
  </li>
  <li>
    <a href="https://github.com/citrusframework/citrus" target="_blank"><span class="hide-on-mobiles">View on </span>GitHub</a>
  </li>
</ul>

  </nav>
  <div class="grid">
    <nav class="main-nav whole hide-on-mobiles">
      <ul>
  <li>
    <img src="/img/brand-logo.png" alt="Citrus"><span class="brand hide-on-mobiles">Citrus</span>
  </li>
  <li class="">
    <a href="/">Home</a>
  </li>
  <li class="">
    <a href="/projects/">Projects</a>
  </li>
  <li class="">
    <a href="/docs/home/">Doc<span class="hide-on-mobiles">umentation</span><span class="show-on-mobiles">s</span></a>
  </li>
  <li class="current">
    <a href="/samples/">Samples</a>
  </li>
  <li class="">
    <a href="/news/">News<span class="hide-on-mobiles"> &amp; Blog</span></a>
  </li>
  <li class="">
    <a href="/help/">Help</a>
  </li>
  <li>
    <a href="https://github.com/citrusframework/citrus" target="_blank"><span class="hide-on-mobiles">View on </span>GitHub</a>
  </li>
</ul>

    </nav>
  </div>
</header>


    <section class="samples">
    <div class="grid">

      <div class="samples-nav-mobile unit whole show-on-mobiles">
  <select onchange="if (this.value) window.location.href=this.value">
    <option value="">Navigate the samples…</option>
    <option value="/samples/">Overview</option>
    <option value="/samples/todo-app/">Sample app</option>
    <option value="/samples/run/">Running</option>
    
    <option value="/samples/testng/">samples-testng/sample-testng</option>
    
    <option value="/samples/message-store/">sample-message-store</option>
    
    <option value="/samples/junit5/">samples-junit/sample-junit5</option>
    
    <option value="/samples/junit/">samples-junit/sample-junit</option>
    
    <option value="/samples/hamcrest/">sample-hamcrest</option>
    
    <option value="/samples/dictionaries/">sample-dictionaries</option>
    
    <option value="/samples/behavior/">sample-behavior</option>
    
    <option value="/samples/annotation-config/">sample-annotation-config</option>
    
    <option value="/samples/reporting/">sample-reporting</option>
    
    <option value="/samples/docker/">sample-docker</option>
    
    <option value="/samples/soap-ssl/">samples-soap/sample-soap-ssl</option>
    
    <option value="/samples/rmi/">sample-rmi</option>
    
    <option value="/samples/soap-wsaddressing/">samples-soap/sample-soap-wsaddressing</option>
    
    <option value="/samples/soap-static-response/">samples-soap/sample-soap-static-response</option>
    
    <option value="/samples/http-static-response/">samples-soap/sample-http-static-response</option>
    
    <option value="/samples/arquillian/">sample-javaee</option>
    
    <option value="/samples/http-loadtest/">samples-http/sample-http-loadtest</option>
    
    <option value="/samples/soap-wssecurity/">samples-soap/sample-soap-wssecurity</option>
    
    <option value="/samples/gradle/">sample-gradle</option>
    
    <option value="/samples/xml/">samples-xml/sample-xml</option>
    
    <option value="/samples/xhtml/">samples-xml/sample-xhtml</option>
    
    <option value="/samples/soap/">samples-soap/sample-soap</option>
    
    <option value="/samples/oxm/">samples-xml/sample-oxm</option>
    
    <option value="/samples/mail/">sample-mail</option>
    
    <option value="/samples/json/">samples-json/sample-json</option>
    
    <option value="/samples/jms/">sample-jms</option>
    
    <option value="/samples/jdbc/">samples-db/sample-jdbc</option>
    
    <option value="/samples/javaconfig/">sample-javaconfig</option>
    
    <option value="/samples/https/">samples-http/sample-https</option>
    
    <option value="/samples/http/">samples-http/sample-http</option>
    
    <option value="/samples/dynamic-endpoints/">sample-dynamic-endpoints</option>
    
    <option value="/samples/dataprovider/">samples-testng/sample-dataprovider</option>
    
    <option value="/samples/databind/">samples-json/sample-databind</option>
    
    <option value="/samples/cucumber/">samples-cucumber/sample-cucumber</option>
    
    <option value="/samples/cucumber-spring/">samples-cucumber/sample-cucumber-spring</option>
    
    <option value="/samples/camel-context/">sample-camel-context</option>
    
    <option value="/samples/binary/">sample-binary</option>
    
  </select>
</div>


      <div class="unit four-fifths">
        <article>
  <h2>
    JUnit5 sample
    <a href="/samples/junit5/" class="permalink" title="Permalink">∞</a>
  </h2>
  <div class="right">
    <a href="https://github.com/citrusframework/citrus-samples/blob/master/samples-junit/sample-junit5" target="_blank">
      <i class="fa fa-pencil"></i> View source code
    </a>
  </div>
  <span class="post-category">
    <span class="label">
      samples
    </span>
  </span>
  <div class="post-content">
    <p>This sample demonstrates the JUnit5 support in Citrus. We write some JUnit5 Citrus test cases that test the REST API of the todo sample application. The JUnit5 support is
also described in detail in <a href="http://www.citrusframework.org/reference/html/index.html#run-with-junit5">reference guide</a></p>

<h2 id="objectives">Objectives</h2>

<p>The <a href="/samples/todo-app/">todo-list</a> sample application provides a REST API for managing todo entries.
Citrus is able to call the API methods as a client in order to validate the Http response messages.</p>

<p>We need a Http client component in the configuration:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@Bean</span>
<span class="kd">public</span> <span class="n">HttpClient</span> <span class="nf">todoClient</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">CitrusEndpoints</span><span class="o">.</span><span class="na">http</span><span class="o">()</span>
                        <span class="o">.</span><span class="na">client</span><span class="o">()</span>
                        <span class="o">.</span><span class="na">requestUrl</span><span class="o">(</span><span class="s">"http://localhost:8080"</span><span class="o">)</span>
                        <span class="o">.</span><span class="na">build</span><span class="o">();</span>
<span class="o">}</span></code></pre></figure>

<p>In test cases we can reference this client component in order to send REST calls to the server. In JUnit5 we can use the <code class="highlighter-rouge">@ExtendsWith</code> annotation that loads the
<code class="highlighter-rouge">CitrusExtension</code> in JUnit5.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@ExtendWith</span><span class="o">(</span><span class="n">CitrusExtension</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TodoListIT</span> <span class="o">{</span>

    <span class="nd">@CitrusEndpoint</span>
    <span class="kd">private</span> <span class="n">HttpClient</span> <span class="n">todoClient</span><span class="o">;</span>

    <span class="nd">@Test</span>
    <span class="nd">@CitrusTest</span>
    <span class="kt">void</span> <span class="nf">testPost</span><span class="o">(</span><span class="nd">@CitrusResource</span> <span class="n">TestRunner</span> <span class="n">runner</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">http</span><span class="o">(</span><span class="n">action</span> <span class="o">-&gt;</span> <span class="n">action</span><span class="o">.</span><span class="na">client</span><span class="o">(</span><span class="n">todoClient</span><span class="o">)</span>
            <span class="o">.</span><span class="na">send</span><span class="o">()</span>
            <span class="o">.</span><span class="na">post</span><span class="o">(</span><span class="s">"/todolist"</span><span class="o">)</span>
            <span class="o">.</span><span class="na">contentType</span><span class="o">(</span><span class="s">"application/x-www-form-urlencoded"</span><span class="o">)</span>
            <span class="o">.</span><span class="na">payload</span><span class="o">(</span><span class="s">"title=${todoName}&amp;description=${todoDescription}"</span><span class="o">));</span>
            
        <span class="n">http</span><span class="o">(</span><span class="n">action</span> <span class="o">-&gt;</span> <span class="n">action</span><span class="o">.</span><span class="na">client</span><span class="o">(</span><span class="n">todoClient</span><span class="o">)</span>
            <span class="o">.</span><span class="na">receive</span><span class="o">()</span>
            <span class="o">.</span><span class="na">response</span><span class="o">(</span><span class="n">HttpStatus</span><span class="o">.</span><span class="na">OK</span><span class="o">));</span>  
    <span class="o">}</span>
<span class="o">}</span>  </code></pre></figure>

<p>The <code class="highlighter-rouge">CitrusExtension</code> makes sure that Citrus framework is loaded at startup and all configuration is done properly. Then we can inject method parameters such as <code class="highlighter-rouge">@CitrusResource</code> annotated <code class="highlighter-rouge">TestRunner</code> that is
our entrance to the Citrus Java fluent API. The runner is then able to use the <code class="highlighter-rouge">httpClient</code> which is automatically injected via <code class="highlighter-rouge">@CitrusEndpoint</code> annotation as a class field member.</p>

<p>We can use the Citrus Java DSL fluent API in the JUnit5 test in order to exchange messages with the todo application system under test. The test is a normal JUnit5 test that is executable via Java IDE or command line using Maven or Gradle.</p>

<p>In order to setup Maven for JUnit5 we need to configure the <code class="highlighter-rouge">maven-failsafe-plugin</code> with the JUnit platform.</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;plugin&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>maven-failsafe-plugin<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>2.19.1<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;configuration&gt;</span>
      <span class="nt">&lt;forkCount&gt;</span>1<span class="nt">&lt;/forkCount&gt;</span>
    <span class="nt">&lt;/configuration&gt;</span>
    <span class="nt">&lt;executions&gt;</span>
      <span class="nt">&lt;execution&gt;</span>
        <span class="nt">&lt;id&gt;</span>integration-tests<span class="nt">&lt;/id&gt;</span>
        <span class="nt">&lt;goals&gt;</span>
          <span class="nt">&lt;goal&gt;</span>integration-test<span class="nt">&lt;/goal&gt;</span>
          <span class="nt">&lt;goal&gt;</span>verify<span class="nt">&lt;/goal&gt;</span>
        <span class="nt">&lt;/goals&gt;</span>
      <span class="nt">&lt;/execution&gt;</span>
    <span class="nt">&lt;/executions&gt;</span>
    <span class="nt">&lt;dependencies&gt;</span>
      <span class="nt">&lt;dependency&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.junit.platform<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>junit-platform-surefire-provider<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>${junit.platform.version}<span class="nt">&lt;/version&gt;</span>
      <span class="nt">&lt;/dependency&gt;</span>
    <span class="nt">&lt;/dependencies&gt;</span>
<span class="nt">&lt;/plugin&gt;</span></code></pre></figure>

<p>In addition to that we need the JUnit dependency in test scope in our project:</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="c">&lt;!-- Test scoped dependencies --&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>org.junit.jupiter<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>junit-jupiter-engine<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>${junit.version}<span class="nt">&lt;/version&gt;</span>
  <span class="nt">&lt;scope&gt;</span>test<span class="nt">&lt;/scope&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>    </code></pre></figure>

<p>That completes the project setup. We are now ready to execute the tests.</p>

<h2 id="run">Run</h2>

<p>You can execute some sample Citrus test cases in this sample in order to write the reports.
Open a separate command line terminal and navigate to the sample folder.</p>

<p>Execute all Citrus tests by calling</p>

<div class="highlighter-rouge">
<pre class="highlight"><code> mvn integration-test
</code></pre>
</div>

<p>You should see Citrus performing several tests with lots of debugging output. 
And of course green tests at the very end of the build and some new reporting files in <code class="highlighter-rouge">target/citrus-reports</code> folder.</p>

<p>Of course you can also start the Citrus tests from your favorite IDE.
Just start the Citrus test using the TestNG IDE integration in IntelliJ, Eclipse or Netbeans.</p>

  </div>
</article>

      </div>

      <div class="unit one-fifth hide-on-mobiles">
  <aside>
    <h4>Common</h4>
    <ul>
      <li class="">
        <a href="/samples/">Overview</a>
      </li>
      <li class="">
        <a href="/samples/todo-app">Sample application</a>
      </li>
      <li class="">
        <a href="/samples/run">Running</a>
      </li>
    </ul>
    <h4>Samples</h4>
    <ul>
      
      <li class="">
        <a href="/samples/testng/">samples-testng/sample-testng</a>
      </li>
      
      <li class="">
        <a href="/samples/message-store/">sample-message-store</a>
      </li>
      
      <li class="current">
        <a href="/samples/junit5/">samples-junit/sample-junit5</a>
      </li>
      
      <li class="">
        <a href="/samples/junit/">samples-junit/sample-junit</a>
      </li>
      
      <li class="">
        <a href="/samples/hamcrest/">sample-hamcrest</a>
      </li>
      
      <li class="">
        <a href="/samples/dictionaries/">sample-dictionaries</a>
      </li>
      
      <li class="">
        <a href="/samples/behavior/">sample-behavior</a>
      </li>
      
      <li class="">
        <a href="/samples/annotation-config/">sample-annotation-config</a>
      </li>
      
      <li class="">
        <a href="/samples/reporting/">sample-reporting</a>
      </li>
      
      <li class="">
        <a href="/samples/docker/">sample-docker</a>
      </li>
      
      <li class="">
        <a href="/samples/soap-ssl/">samples-soap/sample-soap-ssl</a>
      </li>
      
      <li class="">
        <a href="/samples/rmi/">sample-rmi</a>
      </li>
      
      <li class="">
        <a href="/samples/soap-wsaddressing/">samples-soap/sample-soap-wsaddressing</a>
      </li>
      
      <li class="">
        <a href="/samples/soap-static-response/">samples-soap/sample-soap-static-response</a>
      </li>
      
      <li class="">
        <a href="/samples/http-static-response/">samples-soap/sample-http-static-response</a>
      </li>
      
      <li class="">
        <a href="/samples/arquillian/">sample-javaee</a>
      </li>
      
      <li class="">
        <a href="/samples/http-loadtest/">samples-http/sample-http-loadtest</a>
      </li>
      
      <li class="">
        <a href="/samples/soap-wssecurity/">samples-soap/sample-soap-wssecurity</a>
      </li>
      
      <li class="">
        <a href="/samples/gradle/">sample-gradle</a>
      </li>
      
      <li class="">
        <a href="/samples/xml/">samples-xml/sample-xml</a>
      </li>
      
      <li class="">
        <a href="/samples/xhtml/">samples-xml/sample-xhtml</a>
      </li>
      
      <li class="">
        <a href="/samples/soap/">samples-soap/sample-soap</a>
      </li>
      
      <li class="">
        <a href="/samples/oxm/">samples-xml/sample-oxm</a>
      </li>
      
      <li class="">
        <a href="/samples/mail/">sample-mail</a>
      </li>
      
      <li class="">
        <a href="/samples/json/">samples-json/sample-json</a>
      </li>
      
      <li class="">
        <a href="/samples/jms/">sample-jms</a>
      </li>
      
      <li class="">
        <a href="/samples/jdbc/">samples-db/sample-jdbc</a>
      </li>
      
      <li class="">
        <a href="/samples/javaconfig/">sample-javaconfig</a>
      </li>
      
      <li class="">
        <a href="/samples/https/">samples-http/sample-https</a>
      </li>
      
      <li class="">
        <a href="/samples/http/">samples-http/sample-http</a>
      </li>
      
      <li class="">
        <a href="/samples/dynamic-endpoints/">sample-dynamic-endpoints</a>
      </li>
      
      <li class="">
        <a href="/samples/dataprovider/">samples-testng/sample-dataprovider</a>
      </li>
      
      <li class="">
        <a href="/samples/databind/">samples-json/sample-databind</a>
      </li>
      
      <li class="">
        <a href="/samples/cucumber/">samples-cucumber/sample-cucumber</a>
      </li>
      
      <li class="">
        <a href="/samples/cucumber-spring/">samples-cucumber/sample-cucumber-spring</a>
      </li>
      
      <li class="">
        <a href="/samples/camel-context/">sample-camel-context</a>
      </li>
      
      <li class="">
        <a href="/samples/binary/">sample-binary</a>
      </li>
      
    </ul>
  </aside>
</div>


      <div class="clear"></div>

    </div>
  </section>


  <footer role="contentinfo">
  <div class="grid">
    <div class="unit one-third center-on-mobiles">
      <p>Citrus is open source and licensed under <br><a href="https://www.apache.org/licenses/LICENSE-2.0.html">Apache License 2.0</a>.</p>
      <p>This website is licensed under <br><a href="https://github.com/citrusframework/citrus/blob/master/LICENSE">MIT License</a>.</p>
      <br>
      <p>© 2018 ConSol Software GmbH</p>
    </div>
    <div class="unit one-third align-center center-on-mobiles">
      <p>
        <img src="/img/bmi_logo_eng.png" alt="Federal Ministry for Economic Affairs and Energy">
      </p>
    </div>
    <div class="unit one-third align-right center-on-mobiles">
      <p>
        Hosted by<br>
        <a href="http://www.consol.de">
          <img src="/img/sponsor-logo.png" alt="ConSol">
        </a>
      </p>
      <p> </p>
      <br>
      <br>
      <p>
        <a href="http://www.consol.com/legal-notice/">Legal notice</a> | <a href="https://www.consol.com/data-privacy/">Data privacy</a>
      </p>
    </div>
  </div>
</footer>

  <script>
  var anchorForId = function (id) {
    var anchor = document.createElement("a");
    anchor.className = "header-link";
    anchor.href      = "#" + id;
    anchor.innerHTML = "<span class=\"sr-only\">Permalink</span><i class=\"fa fa-link\"></i>";
    anchor.title = "Permalink";
    return anchor;
  };

  var linkifyAnchors = function (level, containingElement) {
    var headers = containingElement.getElementsByTagName("h" + level);
    for (var h = 0; h < headers.length; h++) {
      var header = headers[h];

      if (typeof header.id !== "undefined" && header.id !== "") {
        header.appendChild(anchorForId(header.id));
      }
    }
  };

  document.onreadystatechange = function () {
    if (this.readyState === "complete") {
      var contentBlock = document.getElementsByClassName("docs")[0] || document.getElementsByClassName("samples")[0] || document.getElementsByClassName("news")[0];
      if (!contentBlock) {
        return;
      }
      for (var level = 1; level <= 6; level++) {
        linkifyAnchors(level, contentBlock);
      }
    }
  };
</script>


</body>
</html>
