<!DOCTYPE HTML>
<html lang="en-US">
<head>
  <meta charset="UTF-8">
  <title>Citrus Framework</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="generator" content="Citrus 4.3.0">
  <meta name="description" content="Citrus Framework Website"/>
  <meta name="author" content="ConSol Software GmbH"/>
  <link type="application/atom+xml" rel="alternate" href="http://0.0.0.0:4000/feed.xml" title="Citrus Integration Tests" />
  <link rel="alternate" type="application/atom+xml" title="Recent commits to Citrus master branch" href="https://github.com/citrusframework/citrus/commits/master.atom">
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic,900">
  <link rel="stylesheet" href="/css/screen.css">
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <!--[if lt IE 9]>
  <script src="/js/html5shiv.min.js"></script>
  <script src="/js/respond.min.js"></script>
  <![endif]-->
</head>


<body class="wrap">
  <header role="banner">
  <nav class="mobile-nav show-on-mobiles">
    <ul>
  <li>
    <img src="/img/brand-logo.png" alt="Citrus"><span class="brand hide-on-mobiles">Citrus</span>
  </li>
  <li class="">
    <a href="/">Home</a>
  </li>
  <li class="">
    <a href="/projects/">Projects</a>
  </li>
  <li class="">
    <a href="/docs/documentation/">Doc<span class="hide-on-mobiles">umentation</span><span class="show-on-mobiles">s</span></a>
  </li>
  <li class="">
    <a href="/samples/">Samples</a>
  </li>
  <li class="">
    <a href="/news/">News<span class="hide-on-mobiles"> &amp; Blog</span></a>
  </li>
  <li class="">
    <a href="/help/">Help</a>
  </li>
  <li>
    <a href="https://github.com/citrusframework/citrus" target="_blank"><span class="hide-on-mobiles">View on </span>GitHub</a>
  </li>
</ul>

  </nav>
  <div class="grid">
    <nav class="main-nav whole hide-on-mobiles">
      <ul>
  <li>
    <img src="/img/brand-logo.png" alt="Citrus"><span class="brand hide-on-mobiles">Citrus</span>
  </li>
  <li class="">
    <a href="/">Home</a>
  </li>
  <li class="">
    <a href="/projects/">Projects</a>
  </li>
  <li class="">
    <a href="/docs/documentation/">Doc<span class="hide-on-mobiles">umentation</span><span class="show-on-mobiles">s</span></a>
  </li>
  <li class="">
    <a href="/samples/">Samples</a>
  </li>
  <li class="">
    <a href="/news/">News<span class="hide-on-mobiles"> &amp; Blog</span></a>
  </li>
  <li class="">
    <a href="/help/">Help</a>
  </li>
  <li>
    <a href="https://github.com/citrusframework/citrus" target="_blank"><span class="hide-on-mobiles">View on </span>GitHub</a>
  </li>
</ul>

    </nav>
  </div>
</header>


    <section class="samples">
    <div class="grid">

      <div class="samples-nav-mobile unit whole show-on-mobiles">
  <select onchange="if (this.value) window.location.href=this.value">
    <option value="">Navigate the samples…</option>
    <option value="/samples/">Overview</option>
    <option value="/samples/todo-app/">Sample app</option>
    <option value="/samples/run/">Running</option>
    
    
    <option value="/samples/binary/">sample-binary</option>
    
    <option value="/samples/kafka/">sample-kafka</option>
    
    <option value="/samples/camel-context/">sample-camel-context</option>
    
    <option value="/samples/dynamic-endpoints/">sample-dynamic-endpoints</option>
    
    <option value="/samples/javaconfig/">sample-javaconfig</option>
    
    <option value="/samples/jms/">sample-jms</option>
    
    <option value="/samples/mail/">sample-mail</option>
    
    <option value="/samples/gradle/">sample-gradle</option>
    
    <option value="/samples/selenium/">sample-selenium</option>
    
    <option value="/samples/arquillian/">sample-javaee</option>
    
    <option value="/samples/kubernetes/">sample-kubernetes</option>
    
    <option value="/samples/hamcrest/">sample-hamcrest</option>
    
    <option value="/samples/docker/">sample-docker</option>
    
    <option value="/samples/reporting/">sample-reporting</option>
    
    <option value="/samples/annotation-config/">sample-annotation-config</option>
    
    <option value="/samples/message-store/">sample-message-store</option>
    
    <option value="/samples/behavior/">sample-behavior</option>
    
    <option value="/samples/dictionaries/">sample-dictionaries</option>
    
    <option value="/samples/rmi/">sample-rmi</option>
    
    <option value="/samples/quarkus/">sample-quarkus</option>
    
    <option value="/samples/cucumber-spring/">sample-cucumber-spring</option>
    
    <option value="/samples/cucumber/">sample-cucumber</option>
    
    <option value="/samples/jdbc/">sample-jdbc</option>
    
    <option value="/samples/sql/">sample-sql</option>
    
    <option value="/samples/ftp/">sample-ftp</option>
    
    <option value="/samples/sftp/">sample-sftp</option>
    
    <option value="/samples/scp/">sample-scp</option>
    
    <option value="/samples/http-form-data/">sample-http-form-data</option>
    
    <option value="/samples/http/">sample-http</option>
    
    <option value="/samples/http-basic-auth/">sample-http-basic-auth</option>
    
    <option value="/samples/http-loadtest/">sample-http-loadtest</option>
    
    <option value="/samples/https/">sample-https</option>
    
    <option value="/samples/swagger/">sample-swagger</option>
    
    <option value="/samples/databind/">sample-databind</option>
    
    <option value="/samples/json/">sample-json</option>
    
    <option value="/samples/junit5/">sample-junit5</option>
    
    <option value="/samples/junit/">sample-junit</option>
    
    <option value="/samples/soap-attachment/">sample-soap-attachment</option>
    
    <option value="/samples/soap/">sample-soap</option>
    
    <option value="/samples/soap-mtom/">sample-soap-mtom</option>
    
    <option value="/samples/wsdl/">sample-wsdl</option>
    
    <option value="/samples/soap-ssl/">sample-soap-ssl</option>
    
    <option value="/samples/soap-wssecurity/">sample-soap-wssecurity</option>
    
    <option value="/samples/http-static-response/">sample-http-static-response</option>
    
    <option value="/samples/soap-wsaddressing/">sample-soap-wsaddressing</option>
    
    <option value="/samples/soap-static-response/">sample-soap-static-response</option>
    
    <option value="/samples/dataprovider/">sample-dataprovider</option>
    
    <option value="/samples/testng/">sample-testng</option>
    
    <option value="/samples/xml/">sample-xml</option>
    
    <option value="/samples/xhtml/">sample-xhtml</option>
    
    <option value="/samples/oxm/">sample-oxm</option>
    
  </select>
</div>


      <div class="unit four-fifths">
        <article>
  <h2>
    JavaEE Arquillian sample
    <a href="/samples/arquillian/" class="permalink" title="Permalink">∞</a>
  </h2>
  <div class="right">
    
    
    <a href="https://github.com/citrusframework/citrus-samples/blob/master/sample-javaee" target="_blank">
      <i class="fa fa-pencil"></i> View source code
    </a>
    
  </div>
  <span class="post-category">
    <span class="label">
      samples
    </span>
  </span>
  <div class="post-content">
    <p>The JavaEE sample project uses the Arquillian framework in order to create a micro deployment for in-container testing. 
With Arquillian the tests are executed within application container boundaries. The sample uses the Wildfly application server
as container and provides access to EJB resources, Mail services and JNDI JMS resources such as destinations and connection factories.</p>

<p>The sample integrates with Citrus and Arquillian for automated integration testing of JavaEE applications. You can read more about the
cooperation of Citrus and Arquillian in <a href="https://citrusframework.org/citrus/reference/html#arquillian">reference guide</a>.</p>

<h2 id="objectives">Objectives</h2>

<p>The system under test is a JavaEE EJB application that manages employees in a company. We can add, edit and remove employees in a registry over
multiple APIs. The application provides a REST and JMS API for managing the list of employees known to the system.</p>

<p>In a test scenario the needed classes are deployed as Shrinkwrap micro deployments in the Wildfly application container. The Arquillian
framework gives access to container managed resources such as JNDI resources and dependency injection via CDI.</p>

<p>The Maven project POM includes the Arquillian dependencies in combination with an managed Wildfly container.</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;dependencyManagement&gt;</span>
    <span class="nt">&lt;dependencies&gt;</span>
      <span class="nt">&lt;dependency&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.jboss.arquillian<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>arquillian-bom<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>${arquillian.version}<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;scope&gt;</span>import<span class="nt">&lt;/scope&gt;</span>
        <span class="nt">&lt;type&gt;</span>pom<span class="nt">&lt;/type&gt;</span>
      <span class="nt">&lt;/dependency&gt;</span>
    <span class="nt">&lt;/dependencies&gt;</span>
<span class="nt">&lt;/dependencyManagement&gt;</span>

<span class="nt">&lt;dependencies&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>javax<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>javaee-api<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;version&gt;</span>${jee.api.version}<span class="nt">&lt;/version&gt;</span>
      <span class="nt">&lt;scope&gt;</span>provided<span class="nt">&lt;/scope&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
    
    <span class="nt">&lt;dependency&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>org.jboss.shrinkwrap.resolver<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>shrinkwrap-resolver-impl-maven<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;version&gt;</span>2.2.2<span class="nt">&lt;/version&gt;</span>
      <span class="nt">&lt;scope&gt;</span>test<span class="nt">&lt;/scope&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
    
    <span class="c">&lt;!-- Arquillian JUnit --&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>org.jboss.arquillian.junit<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>arquillian-junit-container<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;version&gt;</span>${arquillian.version}<span class="nt">&lt;/version&gt;</span>
      <span class="nt">&lt;scope&gt;</span>test<span class="nt">&lt;/scope&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
<span class="nt">&lt;/dependencies&gt;</span>
</code></pre></div></div>

<p>The dependencies include the <strong>javaee-api</strong>, <strong>shrinkwrap</strong> and <strong>arquillian-junit-container</strong>. In addition to that we need 
the managed Wildfly container configuration.</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>org.wildfly<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>wildfly-arquillian-container-managed<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>8.2.1.Final<span class="nt">&lt;/version&gt;</span>
  <span class="nt">&lt;scope&gt;</span>test<span class="nt">&lt;/scope&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div></div>

<p>The arquillian tests are configured with a <strong>arquillian.xml</strong> configuration file:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;arquillian</span> <span class="na">xmlns=</span><span class="s">"http://jboss.org/schema/arquillian"</span> <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
            <span class="na">xsi:schemaLocation=</span><span class="s">"http://jboss.org/schema/arquillian http://jboss.org/schema/arquillian/arquillian_1_0.xsd"</span><span class="nt">&gt;</span>

  <span class="nt">&lt;defaultProtocol</span> <span class="na">type=</span><span class="s">"Servlet 3.0"</span><span class="nt">/&gt;</span>

  <span class="nt">&lt;container</span> <span class="na">qualifier=</span><span class="s">"wildfly-managed"</span> <span class="na">default=</span><span class="s">"true"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;configuration&gt;</span>
      <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"jbossHome"</span><span class="nt">&gt;</span>${jboss.home}<span class="nt">&lt;/property&gt;</span>
      <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"serverConfig"</span><span class="nt">&gt;</span>standalone-arquillian.xml<span class="nt">&lt;/property&gt;</span>
      <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"allowConnectingToRunningServer"</span><span class="nt">&gt;</span>true<span class="nt">&lt;/property&gt;</span>
    <span class="nt">&lt;/configuration&gt;</span>
  <span class="nt">&lt;/container&gt;</span>

  <span class="nt">&lt;extension</span> <span class="na">qualifier=</span><span class="s">"citrus"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"autoPackage"</span><span class="nt">&gt;</span>false<span class="nt">&lt;/property&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"citrusVersion"</span><span class="nt">&gt;</span>2.7<span class="nt">&lt;/property&gt;</span>
  <span class="nt">&lt;/extension&gt;</span>
<span class="nt">&lt;/arquillian&gt;</span>
</code></pre></div></div>

<p>In <strong>citrus-context.xml</strong> we define the Citrus client and server components that are used during the tests.</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- Mail server mock --&gt;</span>
<span class="nt">&lt;citrus-mail:server</span> <span class="na">id=</span><span class="s">"mailServer"</span>
                  <span class="na">auto-start=</span><span class="s">"true"</span>
                  <span class="na">port=</span><span class="s">"2222"</span><span class="nt">/&gt;</span>

<span class="c">&lt;!-- Sms Gateway SOAP server --&gt;</span>
<span class="nt">&lt;citrus-ws:server</span> <span class="na">id=</span><span class="s">"smsGatewayServer"</span>
                  <span class="na">auto-start=</span><span class="s">"true"</span>
                  <span class="na">port=</span><span class="s">"18008"</span>
                  <span class="na">timeout=</span><span class="s">"5000"</span><span class="nt">/&gt;</span>
</code></pre></div></div>

<p>These components are used during the tests. The EJB JavaEE application connects to those services as client during the test. 
Now lets have a look at a first sample arquillian test with its Shrinkwrap JavaEE deployments.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Deployments</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">CXF_VERSION</span> <span class="o">=</span> <span class="s">"3.1.4"</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">CXF_GROUP_ID</span> <span class="o">=</span> <span class="s">"org.apache.cxf"</span><span class="o">;</span>

    <span class="cm">/**
     * Default employee registry application with REST Http resource.
     * @return
     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="n">WebArchive</span> <span class="nf">employeeWebRegistry</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="nf">employeeRegistry</span><span class="o">().</span><span class="na">addClasses</span><span class="o">(</span><span class="n">RegistryApplication</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">EmployeeResource</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="cm">/**
     * Default employee registry application with JMS resource MDB.
     * @return
     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="n">WebArchive</span> <span class="nf">employeeJmsRegistry</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="nf">employeeRegistry</span><span class="o">().</span><span class="na">addClass</span><span class="o">(</span><span class="n">EmployeeJmsResource</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="cm">/**
     * Default web archive for the employe registry application.
     * @return
     */</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="n">WebArchive</span> <span class="nf">employeeRegistry</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">ShrinkWrap</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="n">WebArchive</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
                <span class="o">.</span><span class="na">addClasses</span><span class="o">(</span>
                        <span class="n">MailService</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">SmsGatewayService</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">Employees</span><span class="o">.</span><span class="na">class</span><span class="o">,</span>
                        <span class="n">Employee</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">EmployeeRepository</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
                <span class="o">.</span><span class="na">addPackage</span><span class="o">(</span><span class="n">SmsGateway</span><span class="o">.</span><span class="na">class</span><span class="o">.</span><span class="na">getPackage</span><span class="o">())</span>
                <span class="o">.</span><span class="na">addAsLibraries</span><span class="o">(</span><span class="n">Maven</span><span class="o">.</span><span class="na">configureResolver</span><span class="o">()</span>
                        <span class="o">.</span><span class="na">workOffline</span><span class="o">(</span><span class="kc">true</span><span class="o">)</span>
                        <span class="o">.</span><span class="na">resolve</span><span class="o">(</span><span class="n">CXF_GROUP_ID</span> <span class="o">+</span> <span class="s">":cxf-rt-frontend-jaxws:"</span> <span class="o">+</span> <span class="n">CXF_VERSION</span><span class="o">,</span>
                                <span class="n">CXF_GROUP_ID</span> <span class="o">+</span> <span class="s">":cxf-rt-transports-http:"</span> <span class="o">+</span> <span class="n">CXF_VERSION</span><span class="o">)</span>
                        <span class="o">.</span><span class="na">withTransitivity</span><span class="o">()</span>
                        <span class="o">.</span><span class="na">asFile</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>The tests use the Arquillian and Citrus resources with annotation based injection. All resources are automatically injected to the
test before it is executed.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@RunWith</span><span class="o">(</span><span class="n">Arquillian</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="nd">@RunAsClient</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">EmployeeResourceTest</span> <span class="o">{</span>

    <span class="nd">@CitrusFramework</span>
    <span class="kd">private</span> <span class="n">Citrus</span> <span class="n">citrusFramework</span><span class="o">;</span>

    <span class="nd">@ArquillianResource</span>
    <span class="kd">private</span> <span class="n">URL</span> <span class="n">baseUri</span><span class="o">;</span>

    <span class="kd">private</span> <span class="n">String</span> <span class="n">serviceUri</span><span class="o">;</span>

    <span class="nd">@Deployment</span><span class="o">(</span><span class="n">testable</span> <span class="o">=</span> <span class="kc">false</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="n">WebArchive</span> <span class="nf">createDeployment</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">Deployments</span><span class="o">.</span><span class="na">employeeWebRegistry</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="nd">@Before</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setUp</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">MalformedURLException</span> <span class="o">{</span>
        <span class="n">serviceUri</span> <span class="o">=</span> <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="n">baseUri</span><span class="o">,</span> <span class="s">"registry/employee"</span><span class="o">).</span><span class="na">toExternalForm</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="nd">@Test</span>
    <span class="nd">@CitrusTest</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testPostAndGet</span><span class="o">(</span><span class="nd">@CitrusResource</span> <span class="n">TestDesigner</span> <span class="n">citrus</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">citrus</span><span class="o">.</span><span class="na">http</span><span class="o">().</span><span class="na">client</span><span class="o">(</span><span class="n">serviceUri</span><span class="o">)</span>
                <span class="o">.</span><span class="na">post</span><span class="o">()</span>
                <span class="o">.</span><span class="na">contentType</span><span class="o">(</span><span class="n">MediaType</span><span class="o">.</span><span class="na">APPLICATION_FORM_URLENCODED</span><span class="o">)</span>
                <span class="o">.</span><span class="na">payload</span><span class="o">(</span><span class="s">"name=Penny&amp;age=20"</span><span class="o">);</span>

        <span class="n">citrus</span><span class="o">.</span><span class="na">http</span><span class="o">().</span><span class="na">client</span><span class="o">(</span><span class="n">serviceUri</span><span class="o">)</span>
                <span class="o">.</span><span class="na">response</span><span class="o">(</span><span class="n">HttpStatus</span><span class="o">.</span><span class="na">NO_CONTENT</span><span class="o">);</span>

        <span class="n">citrus</span><span class="o">.</span><span class="na">http</span><span class="o">().</span><span class="na">client</span><span class="o">(</span><span class="n">serviceUri</span><span class="o">)</span>
                <span class="o">.</span><span class="na">post</span><span class="o">()</span>
                <span class="o">.</span><span class="na">contentType</span><span class="o">(</span><span class="n">MediaType</span><span class="o">.</span><span class="na">APPLICATION_FORM_URLENCODED</span><span class="o">)</span>
                <span class="o">.</span><span class="na">payload</span><span class="o">(</span><span class="s">"name=Leonard&amp;age=21"</span><span class="o">);</span>

        <span class="n">citrus</span><span class="o">.</span><span class="na">http</span><span class="o">().</span><span class="na">client</span><span class="o">(</span><span class="n">serviceUri</span><span class="o">)</span>
                <span class="o">.</span><span class="na">response</span><span class="o">(</span><span class="n">HttpStatus</span><span class="o">.</span><span class="na">NO_CONTENT</span><span class="o">);</span>

        <span class="n">citrus</span><span class="o">.</span><span class="na">http</span><span class="o">().</span><span class="na">client</span><span class="o">(</span><span class="n">serviceUri</span><span class="o">)</span>
                <span class="o">.</span><span class="na">post</span><span class="o">()</span>
                <span class="o">.</span><span class="na">contentType</span><span class="o">(</span><span class="n">MediaType</span><span class="o">.</span><span class="na">APPLICATION_FORM_URLENCODED</span><span class="o">)</span>
                <span class="o">.</span><span class="na">payload</span><span class="o">(</span><span class="s">"name=Sheldon&amp;age=22"</span><span class="o">);</span>

        <span class="n">citrus</span><span class="o">.</span><span class="na">http</span><span class="o">().</span><span class="na">client</span><span class="o">(</span><span class="n">serviceUri</span><span class="o">)</span>
                <span class="o">.</span><span class="na">response</span><span class="o">(</span><span class="n">HttpStatus</span><span class="o">.</span><span class="na">NO_CONTENT</span><span class="o">);</span>

        <span class="n">citrus</span><span class="o">.</span><span class="na">http</span><span class="o">().</span><span class="na">client</span><span class="o">(</span><span class="n">serviceUri</span><span class="o">)</span>
                <span class="o">.</span><span class="na">get</span><span class="o">()</span>
                <span class="o">.</span><span class="na">accept</span><span class="o">(</span><span class="n">MediaType</span><span class="o">.</span><span class="na">APPLICATION_XML</span><span class="o">);</span>

        <span class="n">citrus</span><span class="o">.</span><span class="na">http</span><span class="o">().</span><span class="na">client</span><span class="o">(</span><span class="n">serviceUri</span><span class="o">)</span>
                <span class="o">.</span><span class="na">response</span><span class="o">(</span><span class="n">HttpStatus</span><span class="o">.</span><span class="na">OK</span><span class="o">)</span>
                <span class="o">.</span><span class="na">payload</span><span class="o">(</span><span class="s">"&lt;employees&gt;"</span> <span class="o">+</span>
                            <span class="s">"&lt;employee&gt;"</span> <span class="o">+</span>
                                <span class="s">"&lt;age&gt;20&lt;/age&gt;"</span> <span class="o">+</span>
                                <span class="s">"&lt;name&gt;Penny&lt;/name&gt;"</span> <span class="o">+</span>
                            <span class="s">"&lt;/employee&gt;"</span> <span class="o">+</span>
                            <span class="s">"&lt;employee&gt;"</span> <span class="o">+</span>
                                <span class="s">"&lt;age&gt;21&lt;/age&gt;"</span> <span class="o">+</span>
                                <span class="s">"&lt;name&gt;Leonard&lt;/name&gt;"</span> <span class="o">+</span>
                            <span class="s">"&lt;/employee&gt;"</span> <span class="o">+</span>
                            <span class="s">"&lt;employee&gt;"</span> <span class="o">+</span>
                                <span class="s">"&lt;age&gt;22&lt;/age&gt;"</span> <span class="o">+</span>
                                <span class="s">"&lt;name&gt;Sheldon&lt;/name&gt;"</span> <span class="o">+</span>
                            <span class="s">"&lt;/employee&gt;"</span> <span class="o">+</span>
                        <span class="s">"&lt;/employees&gt;"</span><span class="o">);</span>

        <span class="n">citrusFramework</span><span class="o">.</span><span class="na">run</span><span class="o">(</span><span class="n">citrus</span><span class="o">.</span><span class="na">getTestCase</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>This is how we can integrate Citrus with Arquillian. Both frameworks cooperate with each other in order to make JavaEE applications testable 
with automated in-container deployments.</p>

<h2 id="run">Run</h2>

<p>You can run the tests by calling</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> mvn integration-test
</code></pre></div></div>

<p>You should see Citrus performing several tests with lots of debugging output in the terminal. And of course green tests 
at the very end of the build.</p>


  </div>
</article>

      </div>

      <div class="unit one-fifth hide-on-mobiles">
  <aside>
    <h4>Common</h4>
    <ul>
      <li class="">
        <a href="/samples/">Overview</a>
      </li>
      <li class="">
        <a href="/samples/todo-app">Sample application</a>
      </li>
      <li class="">
        <a href="/samples/run">Running</a>
      </li>
    </ul>
    <h4>Samples</h4>
    <ul style="margin-top: 5px;">
      
      

      
      
      <li class="">
        <a href="/samples/binary/">sample-binary</a>
      </li>
      
      
      <li class="">
        <a href="/samples/kafka/">sample-kafka</a>
      </li>
      
      
      <li class="">
        <a href="/samples/camel-context/">sample-camel-context</a>
      </li>
      
      
      <li class="">
        <a href="/samples/dynamic-endpoints/">sample-dynamic-endpoints</a>
      </li>
      
      
      <li class="">
        <a href="/samples/javaconfig/">sample-javaconfig</a>
      </li>
      
      
      <li class="">
        <a href="/samples/jms/">sample-jms</a>
      </li>
      
      
      <li class="">
        <a href="/samples/mail/">sample-mail</a>
      </li>
      
      
      <li class="">
        <a href="/samples/gradle/">sample-gradle</a>
      </li>
      
      
      <li class="">
        <a href="/samples/selenium/">sample-selenium</a>
      </li>
      
      
      <li class="current">
        <a href="/samples/arquillian/">sample-javaee</a>
      </li>
      
      
      <li class="">
        <a href="/samples/kubernetes/">sample-kubernetes</a>
      </li>
      
      
      <li class="">
        <a href="/samples/hamcrest/">sample-hamcrest</a>
      </li>
      
      
      <li class="">
        <a href="/samples/docker/">sample-docker</a>
      </li>
      
      
      <li class="">
        <a href="/samples/reporting/">sample-reporting</a>
      </li>
      
      
      <li class="">
        <a href="/samples/annotation-config/">sample-annotation-config</a>
      </li>
      
      
      <li class="">
        <a href="/samples/message-store/">sample-message-store</a>
      </li>
      
      
      <li class="">
        <a href="/samples/behavior/">sample-behavior</a>
      </li>
      
      
      <li class="">
        <a href="/samples/dictionaries/">sample-dictionaries</a>
      </li>
      
      
      <li class="">
        <a href="/samples/rmi/">sample-rmi</a>
      </li>
      
      
    </ul>

    
    <h4>Demo  </h4>
    <ul style="margin-top: 5px;">
      
      
      <li class="">
        <a href="/samples/quarkus/">sample-quarkus</a>
      </li>
      
      
    </ul>

    
    <h4>Samples  Cucumber</h4>
    <ul style="margin-top: 5px;">
      
      
      <li class="">
        <a href="/samples/cucumber-spring/">sample-cucumber-spring</a>
      </li>
      
      
      <li class="">
        <a href="/samples/cucumber/">sample-cucumber</a>
      </li>
      
      
    </ul>

    
    <h4>Samples  Db</h4>
    <ul style="margin-top: 5px;">
      
      
      <li class="">
        <a href="/samples/jdbc/">sample-jdbc</a>
      </li>
      
      
      <li class="">
        <a href="/samples/sql/">sample-sql</a>
      </li>
      
      
    </ul>

    
    <h4>Samples  Ftp</h4>
    <ul style="margin-top: 5px;">
      
      
      <li class="">
        <a href="/samples/ftp/">sample-ftp</a>
      </li>
      
      
      <li class="">
        <a href="/samples/sftp/">sample-sftp</a>
      </li>
      
      
      <li class="">
        <a href="/samples/scp/">sample-scp</a>
      </li>
      
      
    </ul>

    
    <h4>Samples  Http</h4>
    <ul style="margin-top: 5px;">
      
      
      <li class="">
        <a href="/samples/http-form-data/">sample-http-form-data</a>
      </li>
      
      
      <li class="">
        <a href="/samples/http/">sample-http</a>
      </li>
      
      
      <li class="">
        <a href="/samples/http-basic-auth/">sample-http-basic-auth</a>
      </li>
      
      
      <li class="">
        <a href="/samples/http-loadtest/">sample-http-loadtest</a>
      </li>
      
      
      <li class="">
        <a href="/samples/https/">sample-https</a>
      </li>
      
      
      <li class="">
        <a href="/samples/swagger/">sample-swagger</a>
      </li>
      
      
    </ul>

    
    <h4>Samples  Json</h4>
    <ul style="margin-top: 5px;">
      
      
      <li class="">
        <a href="/samples/databind/">sample-databind</a>
      </li>
      
      
      <li class="">
        <a href="/samples/json/">sample-json</a>
      </li>
      
      
    </ul>

    
    <h4>Samples  Junit</h4>
    <ul style="margin-top: 5px;">
      
      
      <li class="">
        <a href="/samples/junit5/">sample-junit5</a>
      </li>
      
      
      <li class="">
        <a href="/samples/junit/">sample-junit</a>
      </li>
      
      
    </ul>

    
    <h4>Samples  Soap</h4>
    <ul style="margin-top: 5px;">
      
      
      <li class="">
        <a href="/samples/soap-attachment/">sample-soap-attachment</a>
      </li>
      
      
      <li class="">
        <a href="/samples/soap/">sample-soap</a>
      </li>
      
      
      <li class="">
        <a href="/samples/soap-mtom/">sample-soap-mtom</a>
      </li>
      
      
      <li class="">
        <a href="/samples/wsdl/">sample-wsdl</a>
      </li>
      
      
      <li class="">
        <a href="/samples/soap-ssl/">sample-soap-ssl</a>
      </li>
      
      
      <li class="">
        <a href="/samples/soap-wssecurity/">sample-soap-wssecurity</a>
      </li>
      
      
      <li class="">
        <a href="/samples/http-static-response/">sample-http-static-response</a>
      </li>
      
      
      <li class="">
        <a href="/samples/soap-wsaddressing/">sample-soap-wsaddressing</a>
      </li>
      
      
      <li class="">
        <a href="/samples/soap-static-response/">sample-soap-static-response</a>
      </li>
      
      
    </ul>

    
    <h4>Samples  Testng</h4>
    <ul style="margin-top: 5px;">
      
      
      <li class="">
        <a href="/samples/dataprovider/">sample-dataprovider</a>
      </li>
      
      
      <li class="">
        <a href="/samples/testng/">sample-testng</a>
      </li>
      
      
    </ul>

    
    <h4>Samples  Xml</h4>
    <ul style="margin-top: 5px;">
      
      
      <li class="">
        <a href="/samples/xml/">sample-xml</a>
      </li>
      
      
      <li class="">
        <a href="/samples/xhtml/">sample-xhtml</a>
      </li>
      
      
      <li class="">
        <a href="/samples/oxm/">sample-oxm</a>
      </li>
      
    </ul>
  </aside>
</div>


      <div class="clear"></div>

    </div>
  </section>


  <footer role="contentinfo">
  <div class="grid">
    <div class="unit one-third center-on-mobiles">
      <p>Citrus is open source and licensed under <br><a href="https://www.apache.org/licenses/LICENSE-2.0.html">Apache License 2.0</a>.</p>
      <p>This website is licensed under <br><a href="https://github.com/citrusframework/citrus/blob/master/LICENSE">MIT License</a>.</p>
      <br>
      <p>© 2024 ConSol Software GmbH</p>
    </div>
    <div class="unit one-third align-center center-on-mobiles">
      <p>
        <img src="/img/bmi_logo_eng.png" alt="Federal Ministry for Economic Affairs and Energy">
      </p>
    </div>
    <div class="unit one-third align-right center-on-mobiles">
      <p>
        Hosted by<br>
        <a href="http://www.consol.de">
          <img src="/img/sponsor-logo.png" alt="ConSol">
        </a>
      </p>
      <p> </p>
      <br>
      <br>
      <p>
        <a href="http://www.consol.com/legal-notice/">Legal notice</a> | <a href="https://www.consol.com/data-privacy/">Data privacy</a>
      </p>
    </div>
  </div>
</footer>

  <script>
  var anchorForId = function (id) {
    var anchor = document.createElement("a");
    anchor.className = "header-link";
    anchor.href      = "#" + id;
    anchor.innerHTML = "<span class=\"sr-only\">Permalink</span><i class=\"fa fa-link\"></i>";
    anchor.title = "Permalink";
    return anchor;
  };

  var linkifyAnchors = function (level, containingElement) {
    var headers = containingElement.getElementsByTagName("h" + level);
    for (var h = 0; h < headers.length; h++) {
      var header = headers[h];

      if (typeof header.id !== "undefined" && header.id !== "") {
        header.appendChild(anchorForId(header.id));
      }
    }
  };

  document.onreadystatechange = function () {
    if (this.readyState === "complete") {
      var contentBlock = document.getElementsByClassName("docs")[0] || document.getElementsByClassName("samples")[0] || document.getElementsByClassName("news")[0];
      if (!contentBlock) {
        return;
      }
      for (var level = 1; level <= 6; level++) {
        linkifyAnchors(level, contentBlock);
      }
    }
  };
</script>


</body>
</html>
