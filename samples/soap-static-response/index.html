<!DOCTYPE HTML>
<html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="UTF-8">
  <title>Citrus Framework</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="generator" content="Citrus 2.7.6">
  <meta name="description" content="Citrus Framework Website">
  <meta name="author" content="ConSol Software GmbH">
  <link type="application/atom+xml" rel="alternate" href="https://citrusframework.org/feed.xml" title="Citrus Integration Tests">
  <link rel="alternate" type="application/atom+xml" title="Recent commits to Citrus master branch" href="https://github.com/citrusframework/citrus/commits/master.atom">
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic,900">
  <link rel="stylesheet" href="/css/screen.css">
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <!--[if lt IE 9]>
  <script src="/js/html5shiv.min.js"></script>
  <script src="/js/respond.min.js"></script>
  <![endif]-->
</head>


<body class="wrap">
  <header role="banner">
  <nav class="mobile-nav show-on-mobiles">
    <ul>
  <li>
    <img src="/img/brand-logo.png" alt="Citrus"><span class="brand hide-on-mobiles">Citrus</span>
  </li>
  <li class="">
    <a href="/">Home</a>
  </li>
  <li class="">
    <a href="/projects/">Projects</a>
  </li>
  <li class="">
    <a href="/docs/home/">Doc<span class="hide-on-mobiles">umentation</span><span class="show-on-mobiles">s</span></a>
  </li>
  <li class="current">
    <a href="/samples/">Samples</a>
  </li>
  <li class="">
    <a href="/news/">News<span class="hide-on-mobiles"> &amp; Blog</span></a>
  </li>
  <li class="">
    <a href="/help/">Help</a>
  </li>
  <li>
    <a href="https://github.com/citrusframework/citrus" target="_blank"><span class="hide-on-mobiles">View on </span>GitHub</a>
  </li>
</ul>

  </nav>
  <div class="grid">
    <nav class="main-nav whole hide-on-mobiles">
      <ul>
  <li>
    <img src="/img/brand-logo.png" alt="Citrus"><span class="brand hide-on-mobiles">Citrus</span>
  </li>
  <li class="">
    <a href="/">Home</a>
  </li>
  <li class="">
    <a href="/projects/">Projects</a>
  </li>
  <li class="">
    <a href="/docs/home/">Doc<span class="hide-on-mobiles">umentation</span><span class="show-on-mobiles">s</span></a>
  </li>
  <li class="current">
    <a href="/samples/">Samples</a>
  </li>
  <li class="">
    <a href="/news/">News<span class="hide-on-mobiles"> &amp; Blog</span></a>
  </li>
  <li class="">
    <a href="/help/">Help</a>
  </li>
  <li>
    <a href="https://github.com/citrusframework/citrus" target="_blank"><span class="hide-on-mobiles">View on </span>GitHub</a>
  </li>
</ul>

    </nav>
  </div>
</header>


    <section class="samples">
    <div class="grid">

      <div class="samples-nav-mobile unit whole show-on-mobiles">
  <select onchange="if (this.value) window.location.href=this.value">
    <option value="">Navigate the samples…</option>
    <option value="/samples/">Overview</option>
    <option value="/samples/todo-app/">Sample app</option>
    <option value="/samples/run/">Running</option>
    
    <option value="/samples/testng/">sample-testng</option>
    
    <option value="/samples/message-store/">sample-message-store</option>
    
    <option value="/samples/junit5/">sample-junit5</option>
    
    <option value="/samples/junit/">sample-junit</option>
    
    <option value="/samples/hamcrest/">sample-hamcrest</option>
    
    <option value="/samples/dictionaries/">sample-dictionaries</option>
    
    <option value="/samples/behavior/">sample-behavior</option>
    
    <option value="/samples/annotation-config/">sample-annotation-config</option>
    
    <option value="/samples/reporting/">sample-reporting</option>
    
    <option value="/samples/docker/">sample-docker</option>
    
    <option value="/samples/soap-ssl/">sample-soap-ssl</option>
    
    <option value="/samples/rmi/">sample-rmi</option>
    
    <option value="/samples/soap-wsaddressing/">sample-soap-wsaddressing</option>
    
    <option value="/samples/soap-static-response/">sample-soap-static-response</option>
    
    <option value="/samples/http-static-response/">sample-http-static-response</option>
    
    <option value="/samples/arquillian/">sample-javaee</option>
    
    <option value="/samples/http-loadtest/">sample-http-loadtest</option>
    
    <option value="/samples/soap-wssecurity/">sample-soap-wssecurity</option>
    
    <option value="/samples/gradle/">sample-gradle</option>
    
    <option value="/samples/xml/">sample-xml</option>
    
    <option value="/samples/xhtml/">sample-xhtml</option>
    
    <option value="/samples/soap/">sample-soap</option>
    
    <option value="/samples/oxm/">sample-oxm</option>
    
    <option value="/samples/mail/">sample-mail</option>
    
    <option value="/samples/json/">sample-json</option>
    
    <option value="/samples/jms/">sample-jms</option>
    
    <option value="/samples/jdbc/">sample-jdbc</option>
    
    <option value="/samples/javaconfig/">sample-javaconfig</option>
    
    <option value="/samples/https/">sample-https</option>
    
    <option value="/samples/http/">sample-http</option>
    
    <option value="/samples/dynamic-endpoints/">sample-dynamic-endpoints</option>
    
    <option value="/samples/dataprovider/">sample-dataprovider</option>
    
    <option value="/samples/databind/">sample-databind</option>
    
    <option value="/samples/cucumber/">sample-cucumber</option>
    
    <option value="/samples/cucumber-spring/">sample-cucumber-spring</option>
    
    <option value="/samples/camel-context/">sample-camel-context</option>
    
    <option value="/samples/binary/">sample-binary</option>
    
  </select>
</div>


      <div class="unit four-fifths">
        <article>
  <h2>
    Static SOAP response sample
    <a href="/samples/soap-static-response/" class="permalink" title="Permalink">∞</a>
  </h2>
  <div class="right">
    <a href="https://github.com/citrusframework/citrus-samples/blob/master/samples-soap/sample-soap-static-response" target="_blank">
      <i class="fa fa-pencil"></i> View source code
    </a>
  </div>
  <span class="post-category">
    <span class="label">
      samples
    </span>
  </span>
  <div class="post-content">
    <p>Usually incoming requests on server components are handled by a Citrus test case where the tester defines the received request message. Also the test
case provides a proper response message to the calling client. There may be times we do not want to handle request/response in the test case. Instead we
need to define a static response message that should always be sent from a server component in Citrus.</p>

<p>This sample shows how to setup a Citrus SOAP web service server component that automatically provides response messages to incoming requests.</p>

<h2 id="objectives">Objectives</h2>

<p>We want to have a server component that provides a static response message to calling clients. Depending on the requested resource path the server
should provide different response messages. we can do this in Citrus with a little bit of Spring bean configuration:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@Bean</span>
<span class="kd">public</span> <span class="n">WebServiceServer</span> <span class="nf">todoListServer</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">CitrusEndpoints</span><span class="o">.</span><span class="na">soap</span><span class="o">()</span>
            <span class="o">.</span><span class="na">server</span><span class="o">()</span>
            <span class="o">.</span><span class="na">port</span><span class="o">(</span><span class="mi">8080</span><span class="o">)</span>
            <span class="o">.</span><span class="na">endpointAdapter</span><span class="o">(</span><span class="n">dispatchingEndpointAdapter</span><span class="o">())</span>
            <span class="o">.</span><span class="na">timeout</span><span class="o">(</span><span class="mi">10000</span><span class="o">)</span>
            <span class="o">.</span><span class="na">autoStart</span><span class="o">(</span><span class="kc">true</span><span class="o">)</span>
            <span class="o">.</span><span class="na">build</span><span class="o">();</span>
<span class="o">}</span>

<span class="nd">@Bean</span>
<span class="kd">public</span> <span class="n">RequestDispatchingEndpointAdapter</span> <span class="nf">dispatchingEndpointAdapter</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">RequestDispatchingEndpointAdapter</span> <span class="n">dispatchingEndpointAdapter</span> <span class="o">=</span> <span class="k">new</span> <span class="n">RequestDispatchingEndpointAdapter</span><span class="o">();</span>
    <span class="n">dispatchingEndpointAdapter</span><span class="o">.</span><span class="na">setMappingKeyExtractor</span><span class="o">(</span><span class="n">mappingKeyExtractor</span><span class="o">());</span>
    <span class="n">dispatchingEndpointAdapter</span><span class="o">.</span><span class="na">setMappingStrategy</span><span class="o">(</span><span class="n">mappingStrategy</span><span class="o">());</span>
    <span class="k">return</span> <span class="n">dispatchingEndpointAdapter</span><span class="o">;</span>
<span class="o">}</span></code></pre></figure>

<p>The <em>todoListServer</em> is a normal server component in Citrus. The endpoint-adapter is different though and defines the way how to automatically respond to calling clients.
The server uses a <strong>dispatchingEndpointAdapter</strong>. This endpoint adapter implementation uses a mapping key extractor and a mapping strategy in order to map incoming requests to response generating
adapters.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@Bean</span>
<span class="kd">public</span> <span class="n">HeaderMappingKeyExtractor</span> <span class="nf">mappingKeyExtractor</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">SoapActionMappingKeyExtractor</span><span class="o">();</span>
<span class="o">}</span>

<span class="nd">@Bean</span>
<span class="kd">public</span> <span class="n">SimpleMappingStrategy</span> <span class="nf">mappingStrategy</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">SimpleMappingStrategy</span> <span class="n">mappingStrategy</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SimpleMappingStrategy</span><span class="o">();</span>

    <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">EndpointAdapter</span><span class="o">&gt;</span> <span class="n">mappings</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;&gt;();</span>

    <span class="n">mappings</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"getTodo"</span><span class="o">,</span> <span class="n">todoResponseAdapter</span><span class="o">());</span>
    <span class="n">mappings</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"getTodoList"</span><span class="o">,</span> <span class="n">todoListResponseAdapter</span><span class="o">());</span>

    <span class="n">mappingStrategy</span><span class="o">.</span><span class="na">setAdapterMappings</span><span class="o">(</span><span class="n">mappings</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">mappingStrategy</span><span class="o">;</span>
<span class="o">}</span></code></pre></figure>

<p>The mapping key extractor implementation evaluates the SOAP action header. Depending on that SOAP action value the
mapping strategy maps incoming requests to different response generating adapter implementations. Here in this example we define <strong>getTodo</strong> and <strong>getTodoList</strong> actions with response
adapters.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@Bean</span>
<span class="kd">public</span> <span class="n">EndpointAdapter</span> <span class="nf">todoResponseAdapter</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">StaticResponseEndpointAdapter</span> <span class="n">endpointAdapter</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StaticResponseEndpointAdapter</span><span class="o">();</span>
    <span class="n">endpointAdapter</span><span class="o">.</span><span class="na">setMessagePayload</span><span class="o">(</span><span class="s">"&lt;getTodoResponse xmlns=\"https://citrusframework.org/samples/todolist\"&gt;"</span> <span class="o">+</span>
                <span class="s">"&lt;todoEntry xmlns=\"https://citrusframework.org/samples/todolist\"&gt;"</span> <span class="o">+</span>
                    <span class="s">"&lt;id&gt;${todoId}&lt;/id&gt;"</span> <span class="o">+</span>
                    <span class="s">"&lt;title&gt;${todoName}&lt;/title&gt;"</span> <span class="o">+</span>
                    <span class="s">"&lt;description&gt;${todoDescription}&lt;/description&gt;"</span> <span class="o">+</span>
                    <span class="s">"&lt;done&gt;false&lt;/done&gt;"</span> <span class="o">+</span>
                <span class="s">"&lt;/todoEntry&gt;"</span> <span class="o">+</span>
            <span class="s">"&lt;/getTodoResponse&gt;"</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">endpointAdapter</span><span class="o">;</span>
<span class="o">}</span>

<span class="nd">@Bean</span>
<span class="kd">public</span> <span class="n">EndpointAdapter</span> <span class="nf">todoListResponseAdapter</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">StaticResponseEndpointAdapter</span> <span class="n">endpointAdapter</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StaticResponseEndpointAdapter</span><span class="o">();</span>
    <span class="n">endpointAdapter</span><span class="o">.</span><span class="na">setMessagePayload</span><span class="o">(</span><span class="s">"&lt;getTodoListResponse xmlns=\"https://citrusframework.org/samples/todolist\"&gt;"</span> <span class="o">+</span>
                <span class="s">"&lt;list&gt;"</span> <span class="o">+</span>
                    <span class="s">"&lt;todoEntry&gt;"</span> <span class="o">+</span>
                        <span class="s">"&lt;id&gt;${todoId}&lt;/id&gt;"</span> <span class="o">+</span>
                        <span class="s">"&lt;title&gt;${todoName}&lt;/title&gt;"</span> <span class="o">+</span>
                        <span class="s">"&lt;description&gt;${todoDescription}&lt;/description&gt;"</span> <span class="o">+</span>
                        <span class="s">"&lt;done&gt;false&lt;/done&gt;"</span> <span class="o">+</span>
                    <span class="s">"&lt;/todoEntry&gt;"</span> <span class="o">+</span>
                <span class="s">"&lt;/list&gt;"</span> <span class="o">+</span>
            <span class="s">"&lt;/getTodoListResponse&gt;"</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">endpointAdapter</span><span class="o">;</span>
<span class="o">}</span></code></pre></figure>

<p>The response adapters provide static response messages. In summary we have a small SOAP web service server component that automatically responds to incoming request messages
with static message payloads. As usual the SOAP envelope handling is automatically done within the server component.</p>

<h2 id="run">Run</h2>

<p>The sample application uses Maven as build tool. So you can compile, package and test the
sample with Maven.</p>

<div class="highlighter-rouge">
<pre class="highlight"><code> mvn clean install
</code></pre>
</div>

<p>This executes the complete Maven build lifecycle. During the build you will see Citrus performing some integration tests.</p>

<p>Execute all Citrus tests by calling</p>

<div class="highlighter-rouge">
<pre class="highlight"><code> mvn integration-test
</code></pre>
</div>

<p>You can also pick a single test by calling</p>

<div class="highlighter-rouge">
<pre class="highlight"><code> mvn integration-test -Ptest=TodoListIT
</code></pre>
</div>

<p>You should see Citrus performing several tests with lots of debugging output. 
And of course green tests at the very end of the build.</p>

<p>Of course you can also start the Citrus tests from your favorite IDE.
Just start the Citrus test using the TestNG IDE integration in IntelliJ, Eclipse or Netbeans.</p>

  </div>
</article>

      </div>

      <div class="unit one-fifth hide-on-mobiles">
  <aside>
    <h4>Common</h4>
    <ul>
      <li class="">
        <a href="/samples/">Overview</a>
      </li>
      <li class="">
        <a href="/samples/todo-app">Sample application</a>
      </li>
      <li class="">
        <a href="/samples/run">Running</a>
      </li>
    </ul>
    <h4>Samples</h4>
    <ul>
      
      <li class="">
        <a href="/samples/testng/">sample-testng</a>
      </li>
      
      <li class="">
        <a href="/samples/message-store/">sample-message-store</a>
      </li>
      
      <li class="">
        <a href="/samples/junit5/">sample-junit5</a>
      </li>
      
      <li class="">
        <a href="/samples/junit/">sample-junit</a>
      </li>
      
      <li class="">
        <a href="/samples/hamcrest/">sample-hamcrest</a>
      </li>
      
      <li class="">
        <a href="/samples/dictionaries/">sample-dictionaries</a>
      </li>
      
      <li class="">
        <a href="/samples/behavior/">sample-behavior</a>
      </li>
      
      <li class="">
        <a href="/samples/annotation-config/">sample-annotation-config</a>
      </li>
      
      <li class="">
        <a href="/samples/reporting/">sample-reporting</a>
      </li>
      
      <li class="">
        <a href="/samples/docker/">sample-docker</a>
      </li>
      
      <li class="">
        <a href="/samples/soap-ssl/">sample-soap-ssl</a>
      </li>
      
      <li class="">
        <a href="/samples/rmi/">sample-rmi</a>
      </li>
      
      <li class="">
        <a href="/samples/soap-wsaddressing/">sample-soap-wsaddressing</a>
      </li>
      
      <li class="current">
        <a href="/samples/soap-static-response/">sample-soap-static-response</a>
      </li>
      
      <li class="">
        <a href="/samples/http-static-response/">sample-http-static-response</a>
      </li>
      
      <li class="">
        <a href="/samples/arquillian/">sample-javaee</a>
      </li>
      
      <li class="">
        <a href="/samples/http-loadtest/">sample-http-loadtest</a>
      </li>
      
      <li class="">
        <a href="/samples/soap-wssecurity/">sample-soap-wssecurity</a>
      </li>
      
      <li class="">
        <a href="/samples/gradle/">sample-gradle</a>
      </li>
      
      <li class="">
        <a href="/samples/xml/">sample-xml</a>
      </li>
      
      <li class="">
        <a href="/samples/xhtml/">sample-xhtml</a>
      </li>
      
      <li class="">
        <a href="/samples/soap/">sample-soap</a>
      </li>
      
      <li class="">
        <a href="/samples/oxm/">sample-oxm</a>
      </li>
      
      <li class="">
        <a href="/samples/mail/">sample-mail</a>
      </li>
      
      <li class="">
        <a href="/samples/json/">sample-json</a>
      </li>
      
      <li class="">
        <a href="/samples/jms/">sample-jms</a>
      </li>
      
      <li class="">
        <a href="/samples/jdbc/">sample-jdbc</a>
      </li>
      
      <li class="">
        <a href="/samples/javaconfig/">sample-javaconfig</a>
      </li>
      
      <li class="">
        <a href="/samples/https/">sample-https</a>
      </li>
      
      <li class="">
        <a href="/samples/http/">sample-http</a>
      </li>
      
      <li class="">
        <a href="/samples/dynamic-endpoints/">sample-dynamic-endpoints</a>
      </li>
      
      <li class="">
        <a href="/samples/dataprovider/">sample-dataprovider</a>
      </li>
      
      <li class="">
        <a href="/samples/databind/">sample-databind</a>
      </li>
      
      <li class="">
        <a href="/samples/cucumber/">sample-cucumber</a>
      </li>
      
      <li class="">
        <a href="/samples/cucumber-spring/">sample-cucumber-spring</a>
      </li>
      
      <li class="">
        <a href="/samples/camel-context/">sample-camel-context</a>
      </li>
      
      <li class="">
        <a href="/samples/binary/">sample-binary</a>
      </li>
      
    </ul>
  </aside>
</div>


      <div class="clear"></div>

    </div>
  </section>


  <footer role="contentinfo">
  <div class="grid">
    <div class="unit one-third center-on-mobiles">
      <p>Citrus is open source and licensed under <br><a href="https://www.apache.org/licenses/LICENSE-2.0.html">Apache License 2.0</a>.</p>
      <p>This website is licensed under <br><a href="https://github.com/citrusframework/citrus/blob/master/LICENSE">MIT License</a>.</p>
      <br>
      <p>© 2018 ConSol Software GmbH</p>
    </div>
    <div class="unit one-third align-center center-on-mobiles">
      <p>
        <img src="/img/bmi_logo_eng.png" alt="Federal Ministry for Economic Affairs and Energy">
      </p>
    </div>
    <div class="unit one-third align-right center-on-mobiles">
      <p>
        Hosted by<br>
        <a href="http://www.consol.de">
          <img src="/img/sponsor-logo.png" alt="ConSol">
        </a>
      </p>
      <p> </p>
      <br>
      <br>
      <p>
        <a href="http://www.consol.com/legal-notice/">Legal notice</a> | <a href="https://www.consol.com/data-privacy/">Data privacy</a>
      </p>
    </div>
  </div>
</footer>

  <script>
  var anchorForId = function (id) {
    var anchor = document.createElement("a");
    anchor.className = "header-link";
    anchor.href      = "#" + id;
    anchor.innerHTML = "<span class=\"sr-only\">Permalink</span><i class=\"fa fa-link\"></i>";
    anchor.title = "Permalink";
    return anchor;
  };

  var linkifyAnchors = function (level, containingElement) {
    var headers = containingElement.getElementsByTagName("h" + level);
    for (var h = 0; h < headers.length; h++) {
      var header = headers[h];

      if (typeof header.id !== "undefined" && header.id !== "") {
        header.appendChild(anchorForId(header.id));
      }
    }
  };

  document.onreadystatechange = function () {
    if (this.readyState === "complete") {
      var contentBlock = document.getElementsByClassName("docs")[0] || document.getElementsByClassName("samples")[0] || document.getElementsByClassName("news")[0];
      if (!contentBlock) {
        return;
      }
      for (var level = 1; level <= 6; level++) {
        linkifyAnchors(level, contentBlock);
      }
    }
  };
</script>


</body>
</html>
